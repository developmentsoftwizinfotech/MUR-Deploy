(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[316],{54316:(Rn,Je,m)=>{"use strict";m.r(Je),m.d(Je,{MapsModule:()=>_e});var x=m(28551),E=m(56213),z=m(3864),ze=(m(6360),m(24288),m(98500)),c=m(82963),ke=m(36895),B=m(591),et=m(56498),Lt=(m(8929),m(36053)),Wt=m(87545),Te=(m(72986),m(24850),m(7625),["*"]),W=function(){function h(d){(0,E.Z)(this,h),this._ngZone=d,this._pending=[],this._listeners=[],this._targetStream=new B.X(void 0)}return(0,x.Z)(h,[{key:"_clearListeners",value:function(){var a,s=(0,ze.Z)(this._listeners);try{for(s.s();!(a=s.n()).done;)a.value.remove()}catch(u){s.e(u)}finally{s.f()}this._listeners=[]}},{key:"getLazyEmitter",value:function(s){var a=this;return this._targetStream.pipe((0,Wt.w)(function(f){var u=new et.y(function(C){if(f){var b=f.addListener(s,function(A){a._ngZone.run(function(){return C.next(A)})});return a._listeners.push(b),function(){return b.remove()}}a._pending.push({observable:u,observer:C})});return u}))}},{key:"setTarget",value:function(s){var a=this._targetStream.value;s!==a&&(a&&(this._clearListeners(),this._pending=[]),this._targetStream.next(s),this._pending.forEach(function(f){return f.observable.subscribe(f.observer)}),this._pending=[])}},{key:"destroy",value:function(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}]),h}(),jt={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},xe="500px",re="500px",Q=function(){var h=function(){function d(s,a,f){var u=this;if((0,E.Z)(this,d),this._elementRef=s,this._ngZone=a,this._eventManager=new W(this._ngZone),this.height=xe,this.width=re,this._options=jt,this.authFailure=new c.EventEmitter,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=(0,ke.NF)(f),this._isBrowser){var C=window;this._existingAuthFailureCallback=C.gm_authFailure,C.gm_authFailure=function(){u._existingAuthFailureCallback&&u._existingAuthFailureCallback(),u.authFailure.emit()}}}return(0,x.Z)(d,[{key:"center",set:function(a){this._center=a}},{key:"zoom",set:function(a){this._zoom=a}},{key:"options",set:function(a){this._options=a||jt}},{key:"ngOnChanges",value:function(a){(a.height||a.width)&&this._setSize();var f=this.googleMap;f&&(a.options&&f.setOptions(this._combineOptions()),a.center&&this._center&&f.setCenter(this._center),a.zoom&&null!=this._zoom&&f.setZoom(this._zoom),a.mapTypeId&&this.mapTypeId&&f.setMapTypeId(this.mapTypeId))}},{key:"ngOnInit",value:function(){var a=this;this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(function(){a.googleMap=new google.maps.Map(a._mapEl,a._combineOptions())}),this._eventManager.setTarget(this.googleMap))}},{key:"ngOnDestroy",value:function(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}},{key:"fitBounds",value:function(a,f){this._assertInitialized(),this.googleMap.fitBounds(a,f)}},{key:"panBy",value:function(a,f){this._assertInitialized(),this.googleMap.panBy(a,f)}},{key:"panTo",value:function(a){this._assertInitialized(),this.googleMap.panTo(a)}},{key:"panToBounds",value:function(a,f){this._assertInitialized(),this.googleMap.panToBounds(a,f)}},{key:"getBounds",value:function(){return this._assertInitialized(),this.googleMap.getBounds()||null}},{key:"getCenter",value:function(){return this._assertInitialized(),this.googleMap.getCenter()}},{key:"getClickableIcons",value:function(){return this._assertInitialized(),this.googleMap.getClickableIcons()}},{key:"getHeading",value:function(){return this._assertInitialized(),this.googleMap.getHeading()}},{key:"getMapTypeId",value:function(){return this._assertInitialized(),this.googleMap.getMapTypeId()}},{key:"getProjection",value:function(){return this._assertInitialized(),this.googleMap.getProjection()}},{key:"getStreetView",value:function(){return this._assertInitialized(),this.googleMap.getStreetView()}},{key:"getTilt",value:function(){return this._assertInitialized(),this.googleMap.getTilt()}},{key:"getZoom",value:function(){return this._assertInitialized(),this.googleMap.getZoom()}},{key:"controls",get:function(){return this._assertInitialized(),this.googleMap.controls}},{key:"data",get:function(){return this._assertInitialized(),this.googleMap.data}},{key:"mapTypes",get:function(){return this._assertInitialized(),this.googleMap.mapTypes}},{key:"overlayMapTypes",get:function(){return this._assertInitialized(),this.googleMap.overlayMapTypes}},{key:"_setSize",value:function(){if(this._mapEl){var a=this._mapEl.style;a.height=null===this.height?"":se(this.height)||xe,a.width=null===this.width?"":se(this.width)||re}}},{key:"_combineOptions",value:function(){var a,f,u=this._options||{};return Object.assign(Object.assign({},u),{center:this._center||u.center||jt.center,zoom:null!==(f=null!==(a=this._zoom)&&void 0!==a?a:u.zoom)&&void 0!==f?f:jt.zoom,mapTypeId:this.mapTypeId||u.mapTypeId||jt.mapTypeId})}},{key:"_assertInitialized",value:function(){}}]),d}();return h.\u0275fac=function(s){return new(s||h)(c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(c.NgZone),c.\u0275\u0275directiveInject(c.PLATFORM_ID))},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["google-map"]],inputs:{height:"height",width:"width",center:"center",zoom:"zoom",options:"options",mapTypeId:"mapTypeId"},outputs:{authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[c.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Te,decls:2,vars:0,consts:[[1,"map-container"]],template:function(s,a){1&s&&(c.\u0275\u0275projectionDef(),c.\u0275\u0275element(0,"div",0),c.\u0275\u0275projection(1))},encapsulation:2,changeDetection:0}),h}(),Ye=/([A-Za-z%]+)$/;function se(h){return null==h?"":Ye.test(h)?h:"".concat(h,"px")}var qt={position:{lat:37.421995,lng:-122.084092}},M=function(){var h=function(){function d(s,a){(0,E.Z)(this,d),this._googleMap=s,this._ngZone=a,this._eventManager=new W(this._ngZone),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}return(0,x.Z)(d,[{key:"title",set:function(a){this._title=a}},{key:"position",set:function(a){this._position=a}},{key:"label",set:function(a){this._label=a}},{key:"clickable",set:function(a){this._clickable=a}},{key:"options",set:function(a){this._options=a}},{key:"icon",set:function(a){this._icon=a}},{key:"visible",set:function(a){this._visible=a}},{key:"ngOnInit",value:function(){var a=this;this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(function(){a.marker=new google.maps.Marker(a._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}},{key:"ngOnChanges",value:function(a){var f=this.marker,u=this._title,C=this._position,b=this._label,A=this._clickable,Y=this._icon,q=this._visible;f&&(a.options&&f.setOptions(this._combineOptions()),a.title&&void 0!==u&&f.setTitle(u),a.position&&C&&f.setPosition(C),a.label&&void 0!==b&&f.setLabel(b),a.clickable&&void 0!==A&&f.setClickable(A),a.icon&&Y&&f.setIcon(Y),a.visible&&void 0!==q&&f.setVisible(q))}},{key:"ngOnDestroy",value:function(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}},{key:"getAnimation",value:function(){return this._assertInitialized(),this.marker.getAnimation()||null}},{key:"getClickable",value:function(){return this._assertInitialized(),this.marker.getClickable()}},{key:"getCursor",value:function(){return this._assertInitialized(),this.marker.getCursor()||null}},{key:"getDraggable",value:function(){return this._assertInitialized(),!!this.marker.getDraggable()}},{key:"getIcon",value:function(){return this._assertInitialized(),this.marker.getIcon()||null}},{key:"getLabel",value:function(){return this._assertInitialized(),this.marker.getLabel()||null}},{key:"getOpacity",value:function(){return this._assertInitialized(),this.marker.getOpacity()||null}},{key:"getPosition",value:function(){return this._assertInitialized(),this.marker.getPosition()||null}},{key:"getShape",value:function(){return this._assertInitialized(),this.marker.getShape()||null}},{key:"getTitle",value:function(){return this._assertInitialized(),this.marker.getTitle()||null}},{key:"getVisible",value:function(){return this._assertInitialized(),this.marker.getVisible()}},{key:"getZIndex",value:function(){return this._assertInitialized(),this.marker.getZIndex()||null}},{key:"getAnchor",value:function(){return this._assertInitialized(),this.marker}},{key:"_combineOptions",value:function(){var a,f,u=this._options||qt;return Object.assign(Object.assign({},u),{title:this._title||u.title,position:this._position||u.position,label:this._label||u.label,clickable:null!==(a=this._clickable)&&void 0!==a?a:u.clickable,map:this._googleMap.googleMap,icon:this._icon||u.icon,visible:null!==(f=this._visible)&&void 0!==f?f:u.visible})}},{key:"_assertInitialized",value:function(){}}]),d}();return h.\u0275fac=function(s){return new(s||h)(c.\u0275\u0275directiveInject(Q),c.\u0275\u0275directiveInject(c.NgZone))},h.\u0275dir=c.\u0275\u0275defineDirective({type:h,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[c.\u0275\u0275NgOnChangesFeature]}),h}(),Ie=function(){var h=(0,x.Z)(function d(){(0,E.Z)(this,d)});return h.\u0275fac=function(s){return new(s||h)},h.\u0275mod=c.\u0275\u0275defineNgModule({type:h}),h.\u0275inj=c.\u0275\u0275defineInjector({}),h}(),Rt=m(98407),_t=function(){function h(d,s){this.element=d,this.zone=s,this.DEFAULT_ZOOM=1,this.DEFAULT_CENTER=(0,Rt.latLng)(38.907192,-77.036871),this.DEFAULT_FPZ_OPTIONS={},this.fitBoundsOptions=this.DEFAULT_FPZ_OPTIONS,this.panOptions=this.DEFAULT_FPZ_OPTIONS,this.zoomOptions=this.DEFAULT_FPZ_OPTIONS,this.zoomPanOptions=this.DEFAULT_FPZ_OPTIONS,this.options={},this.mapReady=new c.EventEmitter}return h.prototype.ngOnInit=function(){var d=this;this.zone.runOutsideAngular(function(){d.map=(0,Rt.map)(d.element.nativeElement,d.options)}),null!=this.center&&null!=this.zoom&&this.setView(this.center,this.zoom),null!=this.fitBounds&&this.setFitBounds(this.fitBounds),this.doResize(),this.mapReady.emit(this.map)},h.prototype.ngOnChanges=function(d){d.zoom&&d.center&&null!=this.zoom&&null!=this.center?this.setView(d.center.currentValue,d.zoom.currentValue):d.zoom?this.setZoom(d.zoom.currentValue):d.center&&this.setCenter(d.center.currentValue),d.fitBounds&&this.setFitBounds(d.fitBounds.currentValue)},h.prototype.getMap=function(){return this.map},h.prototype.onResize=function(){this.delayResize()},h.prototype.doResize=function(){var d=this;this.zone.runOutsideAngular(function(){d.map.invalidateSize({})})},h.prototype.delayResize=function(){null!=this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.doResize.bind(this),200)},h.prototype.setView=function(d,s){var a=this;this.map&&null!=d&&null!=s&&this.zone.runOutsideAngular(function(){a.map.setView(d,s,a.zoomPanOptions)})},h.prototype.setZoom=function(d){var s=this;this.map&&null!=d&&this.zone.runOutsideAngular(function(){s.map.setZoom(d,s.zoomOptions)})},h.prototype.setCenter=function(d){var s=this;this.map&&null!=d&&this.zone.runOutsideAngular(function(){s.map.panTo(d,s.panOptions)})},h.prototype.setFitBounds=function(d){var s=this;this.map&&null!=d&&this.zone.runOutsideAngular(function(){s.map.fitBounds(d,s.fitBoundsOptions)})},h.ctorParameters=function(){return[{type:c.ElementRef},{type:c.NgZone}]},h.propDecorators={fitBoundsOptions:[{type:c.Input,args:["leafletFitBoundsOptions"]}],panOptions:[{type:c.Input,args:["leafletPanOptions"]}],zoomOptions:[{type:c.Input,args:["leafletZoomOptions"]}],zoomPanOptions:[{type:c.Input,args:["leafletZoomPanOptions"]}],options:[{type:c.Input,args:["leafletOptions"]}],mapReady:[{type:c.Output,args:["leafletMapReady"]}],zoom:[{type:c.Input,args:["leafletZoom"]}],center:[{type:c.Input,args:["leafletCenter"]}],fitBounds:[{type:c.Input,args:["leafletFitBounds"]}],onResize:[{type:c.HostListener,args:["window:resize",[]]}]},h.\u0275fac=function(s){return new(s||h)(c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(c.NgZone))},h.\u0275dir=c.\u0275\u0275defineDirective({type:h,selectors:[["","leaflet",""]],hostBindings:function(s,a){1&s&&c.\u0275\u0275listener("resize",function(){return a.onResize()},!1,c.\u0275\u0275resolveWindow)},inputs:{fitBoundsOptions:["leafletFitBoundsOptions","fitBoundsOptions"],panOptions:["leafletPanOptions","panOptions"],zoomOptions:["leafletZoomOptions","zoomOptions"],zoomPanOptions:["leafletZoomPanOptions","zoomPanOptions"],options:["leafletOptions","options"],zoom:["leafletZoom","zoom"],center:["leafletCenter","center"],fitBounds:["leafletFitBounds","fitBounds"]},outputs:{mapReady:"leafletMapReady"},features:[c.\u0275\u0275NgOnChangesFeature]}),h}(),Xt=function(){function h(d){this.leafletDirective=d}return h.prototype.init=function(){},h.prototype.getMap=function(){return this.leafletDirective.getMap()},h}(),Et=(function(){function h(d,s){this.zone=s,this.leafletDirective=new Xt(d)}h.prototype.ngOnInit=function(){this.leafletDirective.init()},h.prototype.ngOnDestroy=function(){var d=this;this.zone.runOutsideAngular(function(){d.layer.remove()})},h.prototype.ngOnChanges=function(d){var s=this;if(d.layer){var a=d.layer.previousValue,f=d.layer.currentValue;this.zone.runOutsideAngular(function(){a?.remove(),null!=f&&s.leafletDirective.getMap().addLayer(f)})}},h.ctorParameters=function(){return[{type:_t},{type:c.NgZone}]},h.propDecorators={layer:[{type:c.Input,args:["leafletLayer"]}]},h.\u0275fac=function(s){return new(s||h)(c.\u0275\u0275directiveInject(_t),c.\u0275\u0275directiveInject(c.NgZone))},h.\u0275dir=c.\u0275\u0275defineDirective({type:h,selectors:[["","leafletLayer",""]],inputs:{layer:["leafletLayer","layer"]},features:[c.\u0275\u0275NgOnChangesFeature]})}(),function(){function h(d,s,a){this.differs=s,this.zone=a,this.leafletDirective=new Xt(d),this.layersDiffer=this.differs.find([]).create()}Object.defineProperty(h.prototype,"layers",{get:function(){return this.layersValue},set:function(s){this.layersValue=s,this.updateLayers()},enumerable:!0,configurable:!0}),h.prototype.ngDoCheck=function(){this.updateLayers()},h.prototype.ngOnInit=function(){this.leafletDirective.init(),this.updateLayers()},h.prototype.ngOnDestroy=function(){this.layers=[]},h.prototype.updateLayers=function(){var d=this.leafletDirective.getMap();if(null!=d&&null!=this.layersDiffer){var s=this.layersDiffer.diff(this.layersValue);null!=s&&this.zone.runOutsideAngular(function(){s.forEachRemovedItem(function(a){d.removeLayer(a.item)}),s.forEachAddedItem(function(a){d.addLayer(a.item)})})}},h.ctorParameters=function(){return[{type:_t},{type:c.IterableDiffers},{type:c.NgZone}]},h.propDecorators={layers:[{type:c.Input,args:["leafletLayers"]}]},h.\u0275fac=function(s){return new(s||h)(c.\u0275\u0275directiveInject(_t),c.\u0275\u0275directiveInject(c.IterableDiffers),c.\u0275\u0275directiveInject(c.NgZone))},h.\u0275dir=c.\u0275\u0275defineDirective({type:h,selectors:[["","leafletLayers",""]],inputs:{layers:["leafletLayers","layers"]}})}(),function(){function h(){this.layersRemoved=0,this.layersChanged=0,this.layersAdded=0}return h.prototype.changed=function(){return!(0===this.layersRemoved&&0===this.layersChanged&&0===this.layersAdded)},h}()),Ut=function(){function h(d){this.zone=d}return h.prototype.getLayersControl=function(){return this.layersControl},h.prototype.init=function(d,s){var a=this,f=d.baseLayers||{},u=d.overlays||{};return this.zone.runOutsideAngular(function(){a.layersControl=Rt.control.layers(f,u,s)}),this.layersControl},h.prototype.applyBaseLayerChanges=function(d){var s=new Et;return null!=this.layersControl&&(s=this.applyChanges(d,this.layersControl.addBaseLayer)),s},h.prototype.applyOverlayChanges=function(d){var s=new Et;return null!=this.layersControl&&(s=this.applyChanges(d,this.layersControl.addOverlay)),s},h.prototype.applyChanges=function(d,s){var a=this,f=new Et;return null!=d&&(d.forEachChangedItem(function(u){a.layersControl.removeLayer(u.previousValue),s.call(a.layersControl,u.currentValue,u.key),f.layersChanged++}),d.forEachRemovedItem(function(u){a.layersControl.removeLayer(u.previousValue),f.layersRemoved++}),d.forEachAddedItem(function(u){s.call(a.layersControl,u.currentValue,u.key),f.layersAdded++})),f},h}(),Ee=function h(){this.baseLayers={},this.overlays={}},Qt=(function(){function h(d,s,a){this.differs=s,this.zone=a,this.leafletDirective=new Xt(d),this.controlLayers=new Ut(a),this.baseLayersDiffer=this.differs.find({}).create(),this.overlaysDiffer=this.differs.find({}).create()}Object.defineProperty(h.prototype,"layersControlConfig",{get:function(){return this.layersControlConfigValue},set:function(s){null==s&&(s=new Ee),null==s.baseLayers&&(s.baseLayers={}),null==s.overlays&&(s.overlays={}),this.layersControlConfigValue=s,this.updateLayers()},enumerable:!0,configurable:!0}),h.prototype.ngOnInit=function(){var d=this;this.leafletDirective.init(),this.zone.runOutsideAngular(function(){d.controlLayers.init({},d.layersControlOptions).addTo(d.leafletDirective.getMap())}),this.updateLayers()},h.prototype.ngOnDestroy=function(){var d=this;this.layersControlConfig={baseLayers:{},overlays:{}},this.zone.runOutsideAngular(function(){d.controlLayers.getLayersControl().remove()})},h.prototype.ngDoCheck=function(){this.updateLayers()},h.prototype.updateLayers=function(){var d=this.leafletDirective.getMap(),s=this.controlLayers.getLayersControl();if(null!=d&&null!=s){if(null!=this.baseLayersDiffer&&null!=this.layersControlConfigValue.baseLayers){var a=this.baseLayersDiffer.diff(this.layersControlConfigValue.baseLayers);this.controlLayers.applyBaseLayerChanges(a)}null!=this.overlaysDiffer&&null!=this.layersControlConfigValue.overlays&&(a=this.overlaysDiffer.diff(this.layersControlConfigValue.overlays),this.controlLayers.applyOverlayChanges(a))}},h.ctorParameters=function(){return[{type:_t},{type:c.KeyValueDiffers},{type:c.NgZone}]},h.propDecorators={layersControlConfig:[{type:c.Input,args:["leafletLayersControl"]}],layersControlOptions:[{type:c.Input,args:["leafletLayersControlOptions"]}]},h.\u0275fac=function(s){return new(s||h)(c.\u0275\u0275directiveInject(_t),c.\u0275\u0275directiveInject(c.KeyValueDiffers),c.\u0275\u0275directiveInject(c.NgZone))},h.\u0275dir=c.\u0275\u0275defineDirective({type:h,selectors:[["","leafletLayersControl",""]],inputs:{layersControlConfig:["leafletLayersControl","layersControlConfig"],layersControlOptions:["leafletLayersControlOptions","layersControlOptions"]}})}(),function(){function h(){}return h.mapToArray=function(d){var s=[];for(var a in d)d.hasOwnProperty(a)&&s.push(d[a]);return s},h}()),de=(function(){function h(d,s,a){this.differs=s,this.zone=a,this.leafletDirective=new Xt(d),this.controlLayers=new Ut(a),this.baseLayersDiffer=this.differs.find({}).create()}Object.defineProperty(h.prototype,"baseLayers",{get:function(){return this.baseLayersValue},set:function(s){this.baseLayersValue=s,this.updateBaseLayers()},enumerable:!0,configurable:!0}),h.prototype.ngOnDestroy=function(){var d=this;this.baseLayers={},this.zone.runOutsideAngular(function(){d.controlLayers.getLayersControl().remove()})},h.prototype.ngOnInit=function(){var d=this;this.leafletDirective.init(),this.zone.runOutsideAngular(function(){d.controlLayers.init({},d.layersControlOptions).addTo(d.leafletDirective.getMap())}),this.updateBaseLayers()},h.prototype.ngDoCheck=function(){this.updateBaseLayers()},h.prototype.updateBaseLayers=function(){var d=this.leafletDirective.getMap(),s=this.controlLayers.getLayersControl();if(null!=d&&null!=s&&null!=this.baseLayersDiffer){var a=this.baseLayersDiffer.diff(this.baseLayersValue);this.controlLayers.applyBaseLayerChanges(a).changed()&&this.syncBaseLayer()}},h.prototype.syncBaseLayer=function(){var f,d=this,s=this.leafletDirective.getMap(),a=Qt.mapToArray(this.baseLayers);s.eachLayer(function(u){f=a.find(function(C){return u===C})}),null!=f?this.baseLayer=f:a.length>0&&(this.baseLayer=a[0],this.zone.runOutsideAngular(function(){d.baseLayer.addTo(s)}))},h.ctorParameters=function(){return[{type:_t},{type:c.KeyValueDiffers},{type:c.NgZone}]},h.propDecorators={baseLayers:[{type:c.Input,args:["leafletBaseLayers"]}],layersControlOptions:[{type:c.Input,args:["leafletLayersControlOptions"]}]},h.\u0275fac=function(s){return new(s||h)(c.\u0275\u0275directiveInject(_t),c.\u0275\u0275directiveInject(c.KeyValueDiffers),c.\u0275\u0275directiveInject(c.NgZone))},h.\u0275dir=c.\u0275\u0275defineDirective({type:h,selectors:[["","leafletBaseLayers",""]],inputs:{baseLayers:["leafletBaseLayers","baseLayers"],layersControlOptions:["leafletLayersControlOptions","layersControlOptions"]}})}(),function(){function h(){}return h.forRoot=function(){return{ngModule:h,providers:[]}},h.ctorParameters=function(){return[]},h.\u0275fac=function(s){return new(s||h)},h.\u0275mod=c.\u0275\u0275defineNgModule({type:h}),h.\u0275inj=c.\u0275\u0275defineInjector({}),h}()),Se=(function(){function h(d,s,a){this.type=d,this.url=s,this.options=a}h.createTileLayer=function(d){return"xyz"===d.type?(0,Rt.tileLayer)(d.url,d.options):Rt.tileLayer.wms(d.url,d.options)},h.createTileLayers=function(d){var s={};for(var a in d)d.hasOwnProperty(a)&&(s[a]=h.createTileLayer(d[a]));return s},h.prototype.createTileLayer=function(){return h.createTileLayer(this)}}(),m(85446)),ot=m(20971),ei=m(7131),ce=m(2504),fe=function(){var h,d=(0,x.Z)(function s(){(0,E.Z)(this,s)});return(h=d).\u0275fac=function(a){return new(a||h)},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["ngx-maps"]],decls:1,vars:0,template:function(a,f){1&a&&c.\u0275\u0275element(0,"router-outlet")},dependencies:[ce.lC],encapsulation:2}),d}(),ge=function(){var h,d=(0,x.Z)(function s(){(0,E.Z)(this,s),this.position={lat:51.678418,lng:7.809007}});return(h=d).\u0275fac=function(a){return new(a||h)},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["ngx-gmaps"]],decls:6,vars:3,consts:[["width","100%","height","36.5625rem",3,"center","zoom"],[3,"position"]],template:function(a,f){1&a&&(c.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header"),c.\u0275\u0275text(2,"Google Maps"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"nb-card-body")(4,"google-map",0),c.\u0275\u0275element(5,"map-marker",1),c.\u0275\u0275elementEnd()()()),2&a&&(c.\u0275\u0275advance(4),c.\u0275\u0275property("center",f.position)("zoom",8),c.\u0275\u0275advance(1),c.\u0275\u0275property("position",f.position))},dependencies:[Q,M,ot.Asz,ot.yKW,ot.ndF],styles:["[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]     agm-map{width:100%;height:var(--card-height-large)}"]}),d}(),De=function(){var h,d=(0,x.Z)(function s(){(0,E.Z)(this,s),this.options={layers:[Rt.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"..."})],zoom:5,center:Rt.latLng({lat:38.991709,lng:-76.886109})}});return(h=d).\u0275fac=function(a){return new(a||h)},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["ngx-leaflet"]],decls:5,vars:1,consts:[["leaflet","",3,"leafletOptions"]],template:function(a,f){1&a&&(c.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header"),c.\u0275\u0275text(2,"Leaflet Maps"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"nb-card-body"),c.\u0275\u0275element(4,"div",0),c.\u0275\u0275elementEnd()()),2&a&&(c.\u0275\u0275advance(4),c.\u0275\u0275property("leafletOptions",f.options))},dependencies:[_t,ot.Asz,ot.yKW,ot.ndF],styles:["[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]     .leaflet-top, [_nghost-%COMP%]     .leaflet-bottom{z-index:997}[_nghost-%COMP%]     .leaflet-container{width:100%;height:var(--card-height-large)}[_nghost-%COMP%]     .leaflet-control-zoom a{text-decoration:none}"]}),d}(),st=m(44290),Vt=m(13347),Mi=m(80529),ii=function(){var h,d=function(){function s(a,f){var u=this;(0,E.Z)(this,s),this.theme=a,this.http=f,this.latlong={},this.max=-1/0,this.min=1/0,this.alive=!0,(0,Lt.aj)([this.http.get("assets/map/world.json"),this.theme.getJsTheme()]).pipe((0,st.o)(function(){return u.alive})).subscribe(function(C){var b=(0,z.Z)(C,2),Y=b[1];(0,Vt.registerMap)("world",b[0]);var q=Y.variables;u.bubbleTheme=Y.variables.bubbleMap,u.geoColors=[q.primary,q.info,q.success,q.warning,q.danger],u.latlong={AD:{latitude:42.5,longitude:1.5},AE:{latitude:24,longitude:54},AF:{latitude:33,longitude:65},AG:{latitude:17.05,longitude:-61.8},AI:{latitude:18.25,longitude:-63.1667},AL:{latitude:41,longitude:20},AM:{latitude:40,longitude:45},AN:{latitude:12.25,longitude:-68.75},AO:{latitude:-12.5,longitude:18.5},AP:{latitude:35,longitude:105},AQ:{latitude:-90,longitude:0},AR:{latitude:-34,longitude:-64},AS:{latitude:-14.3333,longitude:-170},AT:{latitude:47.3333,longitude:13.3333},AU:{latitude:-27,longitude:133},AW:{latitude:12.5,longitude:-69.9667},AZ:{latitude:40.5,longitude:47.5},BA:{latitude:44,longitude:18},BB:{latitude:13.1667,longitude:-59.5333},BD:{latitude:24,longitude:90},BE:{latitude:50.8333,longitude:4},BF:{latitude:13,longitude:-2},BG:{latitude:43,longitude:25},BH:{latitude:26,longitude:50.55},BI:{latitude:-3.5,longitude:30},BJ:{latitude:9.5,longitude:2.25},BM:{latitude:32.3333,longitude:-64.75},BN:{latitude:4.5,longitude:114.6667},BO:{latitude:-17,longitude:-65},BR:{latitude:-10,longitude:-55},BS:{latitude:24.25,longitude:-76},BT:{latitude:27.5,longitude:90.5},BV:{latitude:-54.4333,longitude:3.4},BW:{latitude:-22,longitude:24},BY:{latitude:53,longitude:28},BZ:{latitude:17.25,longitude:-88.75},CA:{latitude:54,longitude:-100},CC:{latitude:-12.5,longitude:96.8333},CD:{latitude:0,longitude:25},CF:{latitude:7,longitude:21},CG:{latitude:-1,longitude:15},CH:{latitude:47,longitude:8},CI:{latitude:8,longitude:-5},CK:{latitude:-21.2333,longitude:-159.7667},CL:{latitude:-30,longitude:-71},CM:{latitude:6,longitude:12},CN:{latitude:35,longitude:105},CO:{latitude:4,longitude:-72},CR:{latitude:10,longitude:-84},CU:{latitude:21.5,longitude:-80},CV:{latitude:16,longitude:-24},CX:{latitude:-10.5,longitude:105.6667},CY:{latitude:35,longitude:33},CZ:{latitude:49.75,longitude:15.5},DE:{latitude:51,longitude:9},DJ:{latitude:11.5,longitude:43},DK:{latitude:56,longitude:10},DM:{latitude:15.4167,longitude:-61.3333},DO:{latitude:19,longitude:-70.6667},DZ:{latitude:28,longitude:3},EC:{latitude:-2,longitude:-77.5},EE:{latitude:59,longitude:26},EG:{latitude:27,longitude:30},EH:{latitude:24.5,longitude:-13},ER:{latitude:15,longitude:39},ES:{latitude:40,longitude:-4},ET:{latitude:8,longitude:38},EU:{latitude:47,longitude:8},FI:{latitude:62,longitude:26},FJ:{latitude:-18,longitude:175},FK:{latitude:-51.75,longitude:-59},FM:{latitude:6.9167,longitude:158.25},FO:{latitude:62,longitude:-7},FR:{latitude:46,longitude:2},GA:{latitude:-1,longitude:11.75},GB:{latitude:54,longitude:-2},GD:{latitude:12.1167,longitude:-61.6667},GE:{latitude:42,longitude:43.5},GF:{latitude:4,longitude:-53},GH:{latitude:8,longitude:-2},GI:{latitude:36.1833,longitude:-5.3667},GL:{latitude:72,longitude:-40},GM:{latitude:13.4667,longitude:-16.5667},GN:{latitude:11,longitude:-10},GP:{latitude:16.25,longitude:-61.5833},GQ:{latitude:2,longitude:10},GR:{latitude:39,longitude:22},GS:{latitude:-54.5,longitude:-37},GT:{latitude:15.5,longitude:-90.25},GU:{latitude:13.4667,longitude:144.7833},GW:{latitude:12,longitude:-15},GY:{latitude:5,longitude:-59},HK:{latitude:22.25,longitude:114.1667},HM:{latitude:-53.1,longitude:72.5167},HN:{latitude:15,longitude:-86.5},HR:{latitude:45.1667,longitude:15.5},HT:{latitude:19,longitude:-72.4167},HU:{latitude:47,longitude:20},ID:{latitude:-5,longitude:120},IE:{latitude:53,longitude:-8},IL:{latitude:31.5,longitude:34.75},IN:{latitude:20,longitude:77},IO:{latitude:-6,longitude:71.5},IQ:{latitude:33,longitude:44},IR:{latitude:32,longitude:53},IS:{latitude:65,longitude:-18},IT:{latitude:42.8333,longitude:12.8333},JM:{latitude:18.25,longitude:-77.5},JO:{latitude:31,longitude:36},JP:{latitude:36,longitude:138},KE:{latitude:1,longitude:38},KG:{latitude:41,longitude:75},KH:{latitude:13,longitude:105},KI:{latitude:1.4167,longitude:173},KM:{latitude:-12.1667,longitude:44.25},KN:{latitude:17.3333,longitude:-62.75},KP:{latitude:40,longitude:127},KR:{latitude:37,longitude:127.5},KW:{latitude:29.3375,longitude:47.6581},KY:{latitude:19.5,longitude:-80.5},KZ:{latitude:48,longitude:68},LA:{latitude:18,longitude:105},LB:{latitude:33.8333,longitude:35.8333},LC:{latitude:13.8833,longitude:-61.1333},LI:{latitude:47.1667,longitude:9.5333},LK:{latitude:7,longitude:81},LR:{latitude:6.5,longitude:-9.5},LS:{latitude:-29.5,longitude:28.5},LT:{latitude:55,longitude:24},LU:{latitude:49.75,longitude:6},LV:{latitude:57,longitude:25},LY:{latitude:25,longitude:17},MA:{latitude:32,longitude:-5},MC:{latitude:43.7333,longitude:7.4},MD:{latitude:47,longitude:29},ME:{latitude:42.5,longitude:19.4},MG:{latitude:-20,longitude:47},MH:{latitude:9,longitude:168},MK:{latitude:41.8333,longitude:22},ML:{latitude:17,longitude:-4},MM:{latitude:22,longitude:98},MN:{latitude:46,longitude:105},MO:{latitude:22.1667,longitude:113.55},MP:{latitude:15.2,longitude:145.75},MQ:{latitude:14.6667,longitude:-61},MR:{latitude:20,longitude:-12},MS:{latitude:16.75,longitude:-62.2},MT:{latitude:35.8333,longitude:14.5833},MU:{latitude:-20.2833,longitude:57.55},MV:{latitude:3.25,longitude:73},MW:{latitude:-13.5,longitude:34},MX:{latitude:23,longitude:-102},MY:{latitude:2.5,longitude:112.5},MZ:{latitude:-18.25,longitude:35},NA:{latitude:-22,longitude:17},NC:{latitude:-21.5,longitude:165.5},NE:{latitude:16,longitude:8},NF:{latitude:-29.0333,longitude:167.95},NG:{latitude:10,longitude:8},NI:{latitude:13,longitude:-85},NL:{latitude:52.5,longitude:5.75},NO:{latitude:62,longitude:10},NP:{latitude:28,longitude:84},NR:{latitude:-.5333,longitude:166.9167},NU:{latitude:-19.0333,longitude:-169.8667},NZ:{latitude:-41,longitude:174},OM:{latitude:21,longitude:57},PA:{latitude:9,longitude:-80},PE:{latitude:-10,longitude:-76},PF:{latitude:-15,longitude:-140},PG:{latitude:-6,longitude:147},PH:{latitude:13,longitude:122},PK:{latitude:30,longitude:70},PL:{latitude:52,longitude:20},PM:{latitude:46.8333,longitude:-56.3333},PR:{latitude:18.25,longitude:-66.5},PS:{latitude:32,longitude:35.25},PT:{latitude:39.5,longitude:-8},PW:{latitude:7.5,longitude:134.5},PY:{latitude:-23,longitude:-58},QA:{latitude:25.5,longitude:51.25},RE:{latitude:-21.1,longitude:55.6},RO:{latitude:46,longitude:25},RS:{latitude:44,longitude:21},RU:{latitude:60,longitude:100},RW:{latitude:-2,longitude:30},SA:{latitude:25,longitude:45},SB:{latitude:-8,longitude:159},SC:{latitude:-4.5833,longitude:55.6667},SD:{latitude:15,longitude:30},SE:{latitude:62,longitude:15},SG:{latitude:1.3667,longitude:103.8},SH:{latitude:-15.9333,longitude:-5.7},SI:{latitude:46,longitude:15},SJ:{latitude:78,longitude:20},SK:{latitude:48.6667,longitude:19.5},SL:{latitude:8.5,longitude:-11.5},SM:{latitude:43.7667,longitude:12.4167},SN:{latitude:14,longitude:-14},SO:{latitude:10,longitude:49},SR:{latitude:4,longitude:-56},ST:{latitude:1,longitude:7},SV:{latitude:13.8333,longitude:-88.9167},SY:{latitude:35,longitude:38},SZ:{latitude:-26.5,longitude:31.5},TC:{latitude:21.75,longitude:-71.5833},TD:{latitude:15,longitude:19},TF:{latitude:-43,longitude:67},TG:{latitude:8,longitude:1.1667},TH:{latitude:15,longitude:100},TJ:{latitude:39,longitude:71},TK:{latitude:-9,longitude:-172},TM:{latitude:40,longitude:60},TN:{latitude:34,longitude:9},TO:{latitude:-20,longitude:-175},TR:{latitude:39,longitude:35},TT:{latitude:11,longitude:-61},TV:{latitude:-8,longitude:178},TW:{latitude:23.5,longitude:121},TZ:{latitude:-6,longitude:35},UA:{latitude:49,longitude:32},UG:{latitude:1,longitude:32},UM:{latitude:19.2833,longitude:166.6},US:{latitude:38,longitude:-97},UY:{latitude:-33,longitude:-56},UZ:{latitude:41,longitude:64},VA:{latitude:41.9,longitude:12.45},VC:{latitude:13.25,longitude:-61.2},VE:{latitude:8,longitude:-66},VG:{latitude:18.5,longitude:-64.5},VI:{latitude:18.3333,longitude:-64.8333},VN:{latitude:16,longitude:106},VU:{latitude:-16,longitude:167},WF:{latitude:-13.3,longitude:-176.2},WS:{latitude:-13.5833,longitude:-172.3333},YE:{latitude:15,longitude:48},YT:{latitude:-12.8333,longitude:45.1667},ZA:{latitude:-29,longitude:24},ZM:{latitude:-15,longitude:30},ZW:{latitude:-20,longitude:30}},u.mapData=[{code:"AF",name:"Afghanistan",value:32358260,color:u.getRandomGeoColor()},{code:"AL",name:"Albania",value:3215988,color:u.getRandomGeoColor()},{code:"DZ",name:"Algeria",value:35980193,color:u.getRandomGeoColor()},{code:"AO",name:"Angola",value:19618432,color:u.getRandomGeoColor()},{code:"AR",name:"Argentina",value:40764561,color:u.getRandomGeoColor()},{code:"AM",name:"Armenia",value:3100236,color:u.getRandomGeoColor()},{code:"AU",name:"Australia",value:22605732,color:u.getRandomGeoColor()},{code:"AT",name:"Austria",value:8413429,color:u.getRandomGeoColor()},{code:"AZ",name:"Azerbaijan",value:9306023,color:u.getRandomGeoColor()},{code:"BH",name:"Bahrain",value:1323535,color:u.getRandomGeoColor()},{code:"BD",name:"Bangladesh",value:150493658,color:u.getRandomGeoColor()},{code:"BY",name:"Belarus",value:9559441,color:u.getRandomGeoColor()},{code:"BE",name:"Belgium",value:10754056,color:u.getRandomGeoColor()},{code:"BJ",name:"Benin",value:9099922,color:u.getRandomGeoColor()},{code:"BT",name:"Bhutan",value:738267,color:u.getRandomGeoColor()},{code:"BO",name:"Bolivia",value:10088108,color:u.getRandomGeoColor()},{code:"BA",name:"Bosnia and Herzegovina",value:3752228,color:u.getRandomGeoColor()},{code:"BW",name:"Botswana",value:2030738,color:u.getRandomGeoColor()},{code:"BR",name:"Brazil",value:196655014,color:u.getRandomGeoColor()},{code:"BN",name:"Brunei",value:405938,color:u.getRandomGeoColor()},{code:"BG",name:"Bulgaria",value:7446135,color:u.getRandomGeoColor()},{code:"BF",name:"Burkina Faso",value:16967845,color:u.getRandomGeoColor()},{code:"BI",name:"Burundi",value:8575172,color:u.getRandomGeoColor()},{code:"KH",name:"Cambodia",value:14305183,color:u.getRandomGeoColor()},{code:"CM",name:"Cameroon",value:20030362,color:u.getRandomGeoColor()},{code:"CA",name:"Canada",value:34349561,color:u.getRandomGeoColor()},{code:"CV",name:"Cape Verde",value:500585,color:u.getRandomGeoColor()},{code:"CF",name:"Central African Rep.",value:4486837,color:u.getRandomGeoColor()},{code:"TD",name:"Chad",value:11525496,color:u.getRandomGeoColor()},{code:"CL",name:"Chile",value:17269525,color:u.getRandomGeoColor()},{code:"CN",name:"China",value:1347565324,color:u.getRandomGeoColor()},{code:"CO",name:"Colombia",value:46927125,color:u.getRandomGeoColor()},{code:"KM",name:"Comoros",value:753943,color:u.getRandomGeoColor()},{code:"CD",name:"Congo, Dem. Rep.",value:67757577,color:u.getRandomGeoColor()},{code:"CG",name:"Congo, Rep.",value:4139748,color:u.getRandomGeoColor()},{code:"CR",name:"Costa Rica",value:4726575,color:u.getRandomGeoColor()},{code:"CI",name:"Cote d'Ivoire",value:20152894,color:u.getRandomGeoColor()},{code:"HR",name:"Croatia",value:4395560,color:u.getRandomGeoColor()},{code:"CU",name:"Cuba",value:11253665,color:u.getRandomGeoColor()},{code:"CY",name:"Cyprus",value:1116564,color:u.getRandomGeoColor()},{code:"CZ",name:"Czech Rep.",value:10534293,color:u.getRandomGeoColor()},{code:"DK",name:"Denmark",value:5572594,color:u.getRandomGeoColor()},{code:"DJ",name:"Djibouti",value:905564,color:u.getRandomGeoColor()},{code:"DO",name:"Dominican Rep.",value:10056181,color:u.getRandomGeoColor()},{code:"EC",name:"Ecuador",value:14666055,color:u.getRandomGeoColor()},{code:"EG",name:"Egypt",value:82536770,color:u.getRandomGeoColor()},{code:"SV",name:"El Salvador",value:6227491,color:u.getRandomGeoColor()},{code:"GQ",name:"Equatorial Guinea",value:720213,color:u.getRandomGeoColor()},{code:"ER",name:"Eritrea",value:5415280,color:u.getRandomGeoColor()},{code:"EE",name:"Estonia",value:1340537,color:u.getRandomGeoColor()},{code:"ET",name:"Ethiopia",value:84734262,color:u.getRandomGeoColor()},{code:"FJ",name:"Fiji",value:868406,color:u.getRandomGeoColor()},{code:"FI",name:"Finland",value:5384770,color:u.getRandomGeoColor()},{code:"FR",name:"France",value:63125894,color:u.getRandomGeoColor()},{code:"GA",name:"Gabon",value:1534262,color:u.getRandomGeoColor()},{code:"GM",name:"Gambia",value:1776103,color:u.getRandomGeoColor()},{code:"GE",name:"Georgia",value:4329026,color:u.getRandomGeoColor()},{code:"DE",name:"Germany",value:82162512,color:u.getRandomGeoColor()},{code:"GH",name:"Ghana",value:24965816,color:u.getRandomGeoColor()},{code:"GR",name:"Greece",value:11390031,color:u.getRandomGeoColor()},{code:"GT",name:"Guatemala",value:14757316,color:u.getRandomGeoColor()},{code:"GN",name:"Guinea",value:10221808,color:u.getRandomGeoColor()},{code:"GW",name:"Guinea-Bissau",value:1547061,color:u.getRandomGeoColor()},{code:"GY",name:"Guyana",value:756040,color:u.getRandomGeoColor()},{code:"HT",name:"Haiti",value:10123787,color:u.getRandomGeoColor()},{code:"HN",name:"Honduras",value:7754687,color:u.getRandomGeoColor()},{code:"HK",name:"Hong Kong, China",value:7122187,color:u.getRandomGeoColor()},{code:"HU",name:"Hungary",value:9966116,color:u.getRandomGeoColor()},{code:"IS",name:"Iceland",value:324366,color:u.getRandomGeoColor()},{code:"IN",name:"India",value:1241491960,color:u.getRandomGeoColor()},{code:"ID",name:"Indonesia",value:242325638,color:u.getRandomGeoColor()},{code:"IR",name:"Iran",value:74798599,color:u.getRandomGeoColor()},{code:"IQ",name:"Iraq",value:32664942,color:u.getRandomGeoColor()},{code:"IE",name:"Ireland",value:4525802,color:u.getRandomGeoColor()},{code:"IL",name:"Israel",value:7562194,color:u.getRandomGeoColor()},{code:"IT",name:"Italy",value:60788694,color:u.getRandomGeoColor()},{code:"JM",name:"Jamaica",value:2751273,color:u.getRandomGeoColor()},{code:"JP",name:"Japan",value:126497241,color:u.getRandomGeoColor()},{code:"JO",name:"Jordan",value:6330169,color:u.getRandomGeoColor()},{code:"KZ",name:"Kazakhstan",value:16206750,color:u.getRandomGeoColor()},{code:"KE",name:"Kenya",value:41609728,color:u.getRandomGeoColor()},{code:"KP",name:"Korea, Dem. Rep.",value:24451285,color:u.getRandomGeoColor()},{code:"KR",name:"Korea, Rep.",value:48391343,color:u.getRandomGeoColor()},{code:"KW",name:"Kuwait",value:2818042,color:u.getRandomGeoColor()},{code:"KG",name:"Kyrgyzstan",value:5392580,color:u.getRandomGeoColor()},{code:"LA",name:"Laos",value:6288037,color:u.getRandomGeoColor()},{code:"LV",name:"Latvia",value:2243142,color:u.getRandomGeoColor()},{code:"LB",name:"Lebanon",value:4259405,color:u.getRandomGeoColor()},{code:"LS",name:"Lesotho",value:2193843,color:u.getRandomGeoColor()},{code:"LR",name:"Liberia",value:4128572,color:u.getRandomGeoColor()},{code:"LY",name:"Libya",value:6422772,color:u.getRandomGeoColor()},{code:"LT",name:"Lithuania",value:3307481,color:u.getRandomGeoColor()},{code:"LU",name:"Luxembourg",value:515941,color:u.getRandomGeoColor()},{code:"MK",name:"Macedonia, FYR",value:2063893,color:u.getRandomGeoColor()},{code:"MG",name:"Madagascar",value:21315135,color:u.getRandomGeoColor()},{code:"MW",name:"Malawi",value:15380888,color:u.getRandomGeoColor()},{code:"MY",name:"Malaysia",value:28859154,color:u.getRandomGeoColor()},{code:"ML",name:"Mali",value:15839538,color:u.getRandomGeoColor()},{code:"MR",name:"Mauritania",value:3541540,color:u.getRandomGeoColor()},{code:"MU",name:"Mauritius",value:1306593,color:u.getRandomGeoColor()},{code:"MX",name:"Mexico",value:114793341,color:u.getRandomGeoColor()},{code:"MD",name:"Moldova",value:3544864,color:u.getRandomGeoColor()},{code:"MN",name:"Mongolia",value:2800114,color:u.getRandomGeoColor()},{code:"ME",name:"Montenegro",value:632261,color:u.getRandomGeoColor()},{code:"MA",name:"Morocco",value:32272974,color:u.getRandomGeoColor()},{code:"MZ",name:"Mozambique",value:23929708,color:u.getRandomGeoColor()},{code:"MM",name:"Myanmar",value:48336763,color:u.getRandomGeoColor()},{code:"NA",name:"Namibia",value:2324004,color:u.getRandomGeoColor()},{code:"NP",name:"Nepal",value:30485798,color:u.getRandomGeoColor()},{code:"NL",name:"Netherlands",value:16664746,color:u.getRandomGeoColor()},{code:"NZ",name:"New Zealand",value:4414509,color:u.getRandomGeoColor()},{code:"NI",name:"Nicaragua",value:5869859,color:u.getRandomGeoColor()},{code:"NE",name:"Niger",value:16068994,color:u.getRandomGeoColor()},{code:"NG",name:"Nigeria",value:162470737,color:u.getRandomGeoColor()},{code:"NO",name:"Norway",value:4924848,color:u.getRandomGeoColor()},{code:"OM",name:"Oman",value:2846145,color:u.getRandomGeoColor()},{code:"PK",name:"Pakistan",value:176745364,color:u.getRandomGeoColor()},{code:"PA",name:"Panama",value:3571185,color:u.getRandomGeoColor()},{code:"PG",name:"Papua New Guinea",value:7013829,color:u.getRandomGeoColor()},{code:"PY",name:"Paraguay",value:6568290,color:u.getRandomGeoColor()},{code:"PE",name:"Peru",value:29399817,color:u.getRandomGeoColor()},{code:"PH",name:"Philippines",value:94852030,color:u.getRandomGeoColor()},{code:"PL",name:"Poland",value:38298949,color:u.getRandomGeoColor()},{code:"PT",name:"Portugal",value:10689663,color:u.getRandomGeoColor()},{code:"PR",name:"Puerto Rico",value:3745526,color:u.getRandomGeoColor()},{code:"QA",name:"Qatar",value:1870041,color:u.getRandomGeoColor()},{code:"RO",name:"Romania",value:21436495,color:u.getRandomGeoColor()},{code:"RU",name:"Russia",value:142835555,color:u.getRandomGeoColor()},{code:"RW",name:"Rwanda",value:10942950,color:u.getRandomGeoColor()},{code:"SA",name:"Saudi Arabia",value:28082541,color:u.getRandomGeoColor()},{code:"SN",name:"Senegal",value:12767556,color:u.getRandomGeoColor()},{code:"RS",name:"Serbia",value:9853969,color:u.getRandomGeoColor()},{code:"SL",name:"Sierra Leone",value:5997486,color:u.getRandomGeoColor()},{code:"SG",name:"Singapore",value:5187933,color:u.getRandomGeoColor()},{code:"SK",name:"Slovak Republic",value:5471502,color:u.getRandomGeoColor()},{code:"SI",name:"Slovenia",value:2035012,color:u.getRandomGeoColor()},{code:"SB",name:"Solomon Islands",value:552267,color:u.getRandomGeoColor()},{code:"SO",name:"Somalia",value:9556873,color:u.getRandomGeoColor()},{code:"ZA",name:"South Africa",value:50459978,color:u.getRandomGeoColor()},{code:"ES",name:"Spain",value:46454895,color:u.getRandomGeoColor()},{code:"LK",name:"Sri Lanka",value:21045394,color:u.getRandomGeoColor()},{code:"SD",name:"Sudan",value:34735288,color:u.getRandomGeoColor()},{code:"SR",name:"Suriname",value:529419,color:u.getRandomGeoColor()},{code:"SZ",name:"Swaziland",value:1203330,color:u.getRandomGeoColor()},{code:"SE",name:"Sweden",value:9440747,color:u.getRandomGeoColor()},{code:"CH",name:"Switzerland",value:7701690,color:u.getRandomGeoColor()},{code:"SY",name:"Syria",value:20766037,color:u.getRandomGeoColor()},{code:"TW",name:"Taiwan",value:23072e3,color:u.getRandomGeoColor()},{code:"TJ",name:"Tajikistan",value:6976958,color:u.getRandomGeoColor()},{code:"TZ",name:"Tanzania",value:46218486,color:u.getRandomGeoColor()},{code:"TH",name:"Thailand",value:69518555,color:u.getRandomGeoColor()},{code:"TG",name:"Togo",value:6154813,color:u.getRandomGeoColor()},{code:"TT",name:"Trinidad and Tobago",value:1346350,color:u.getRandomGeoColor()},{code:"TN",name:"Tunisia",value:10594057,color:u.getRandomGeoColor()},{code:"TR",name:"Turkey",value:73639596,color:u.getRandomGeoColor()},{code:"TM",name:"Turkmenistan",value:5105301,color:u.getRandomGeoColor()},{code:"UG",name:"Uganda",value:34509205,color:u.getRandomGeoColor()},{code:"UA",name:"Ukraine",value:45190180,color:u.getRandomGeoColor()},{code:"AE",name:"United Arab Emirates",value:7890924,color:u.getRandomGeoColor()},{code:"GB",name:"United Kingdom",value:62417431,color:u.getRandomGeoColor()},{code:"US",name:"United States",value:313085380,color:u.getRandomGeoColor()},{code:"UY",name:"Uruguay",value:3380008,color:u.getRandomGeoColor()},{code:"UZ",name:"Uzbekistan",value:27760267,color:u.getRandomGeoColor()},{code:"VE",name:"Venezuela",value:29436891,color:u.getRandomGeoColor()},{code:"PS",name:"West Bank and Gaza",value:4152369,color:u.getRandomGeoColor()},{code:"VN",name:"Vietnam",value:88791996,color:u.getRandomGeoColor()},{code:"YE",name:"Yemen, Rep.",value:24799880,color:u.getRandomGeoColor()},{code:"ZM",name:"Zambia",value:13474959,color:u.getRandomGeoColor()},{code:"ZW",name:"Zimbabwe",value:12754378,color:u.getRandomGeoColor()}],u.mapData.forEach(function(F){F.value>u.max&&(u.max=F.value),F.value<u.min&&(u.min=F.value)}),u.options={title:{text:"World Population (2011)",left:"center",top:"16px",textStyle:{color:u.bubbleTheme.titleColor}},tooltip:{trigger:"item",formatter:function(rt){return"".concat(rt.name,": ").concat(rt.value[2])}},visualMap:{show:!1,min:0,max:u.max,inRange:{symbolSize:[6,60]}},geo:{name:"World Population (2010)",type:"map",map:"world",roam:!0,label:{emphasis:{show:!1}},itemStyle:{normal:{areaColor:u.bubbleTheme.areaColor,borderColor:u.bubbleTheme.areaBorderColor},emphasis:{areaColor:u.bubbleTheme.areaHoverColor}},zoom:1.1},series:[{type:"scatter",coordinateSystem:"geo",data:u.mapData.map(function(F){return{name:F.name,value:[u.latlong[F.code].longitude,u.latlong[F.code].latitude,F.value],itemStyle:{normal:{color:F.color}}}})}]}})}return(0,x.Z)(s,[{key:"ngOnDestroy",value:function(){this.alive=!1}},{key:"getRandomGeoColor",value:function(){var f=Math.round(Math.random()*this.geoColors.length);return this.geoColors[f]}}]),s}();return(h=d).\u0275fac=function(a){return new(a||h)(c.\u0275\u0275directiveInject(ot.WMF),c.\u0275\u0275directiveInject(Mi.eN))},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["ngx-bubble-map"]],decls:4,vars:1,consts:[["echarts","",1,"echarts",3,"options"]],template:function(a,f){1&a&&(c.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header"),c.\u0275\u0275text(2,"Bubble Maps"),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(3,"div",0),c.\u0275\u0275elementEnd()),2&a&&(c.\u0275\u0275advance(3),c.\u0275\u0275property("options",f.options))},dependencies:[Se.w,ot.Asz,ot.ndF],styles:["[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-top:1.25rem}[_nghost-%COMP%]   .echarts[_ngcontent-%COMP%]{width:100%;height:var(--card-height-large)}"]}),d}(),pt=(0,x.Z)(function h(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:53.9,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:27.5667;(0,E.Z)(this,h),this.lat=d,this.lng=s}),ut=function(){var h,d=function(){function s(){(0,E.Z)(this,s),this.position=null,this.zoom=1}return(0,x.Z)(s,[{key:"searchedPosition",set:function(f){f&&(this.position=f,this.zoom=12)}},{key:"ngOnInit",value:function(){var f=this;"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(u){f.searchedPosition=new pt(u.coords.latitude,u.coords.longitude)})}}]),s}();return(h=d).\u0275fac=function(a){return new(a||h)},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["ngx-map"]],inputs:{searchedPosition:"searchedPosition"},decls:2,vars:3,consts:[["width","100%","height","36.5625rem",3,"center","zoom"],[3,"position"]],template:function(a,f){1&a&&(c.\u0275\u0275elementStart(0,"google-map",0),c.\u0275\u0275element(1,"map-marker",1),c.\u0275\u0275elementEnd()),2&a&&(c.\u0275\u0275property("center",f.position)("zoom",f.zoom),c.\u0275\u0275advance(1),c.\u0275\u0275property("position",f.position))},dependencies:[Q,M],styles:["[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]     agm-map{width:100%;height:var(--card-height-large)}"]}),d}(),ht=["search"],Ze=function(){var h,d=function(){function s(a){(0,E.Z)(this,s),this.ngZone=a,this.positionChanged=new c.EventEmitter}return(0,x.Z)(s,[{key:"ngOnInit",value:function(){var f=this,u=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement,{types:["address"]});u.addListener("place_changed",function(){f.ngZone.run(function(){var C=u.getPlace();null==C.geometry||f.positionChanged.emit(new pt(C.geometry.location.lat(),C.geometry.location.lng()))})})}}]),s}();return(h=d).\u0275fac=function(a){return new(a||h)(c.\u0275\u0275directiveInject(c.NgZone))},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["ngx-search"]],viewQuery:function(a,f){var u;1&a&&c.\u0275\u0275viewQuery(ht,7),2&a&&c.\u0275\u0275queryRefresh(u=c.\u0275\u0275loadQuery())&&(f.searchElementRef=u.first)},outputs:{positionChanged:"positionChanged"},decls:3,vars:0,consts:[[1,"form-group"],["placeholder","search for location","autocorrect","off","autocapitalize","off","spellcheck","off","type","text",1,"form-control","search-location"],["search",""]],template:function(a,f){1&a&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275element(1,"input",1,2),c.\u0275\u0275elementEnd())},encapsulation:2}),d}(),ni=function(){var h,d=function(){function s(){(0,E.Z)(this,s),this.searchedPosition=new pt}return(0,x.Z)(s,[{key:"setPosition",value:function(f){this.searchedPosition=f}}]),s}();return(h=d).\u0275fac=function(a){return new(a||h)},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["ngx-search-map"]],decls:6,vars:1,consts:[[3,"positionChanged"],[3,"searchedPosition"]],template:function(a,f){1&a&&(c.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header"),c.\u0275\u0275text(2,"Google Maps with search"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"nb-card-body")(4,"ngx-search",0),c.\u0275\u0275listener("positionChanged",function(C){return f.setPosition(C)}),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(5,"ngx-map",1),c.\u0275\u0275elementEnd()()),2&a&&(c.\u0275\u0275advance(5),c.\u0275\u0275property("searchedPosition",f.searchedPosition))},dependencies:[ot.Asz,ot.yKW,ot.ndF,ut,Ze],encapsulation:2}),d}(),St=[{path:"",component:fe,children:[{path:"gmaps",component:ge},{path:"leaflet",component:De},{path:"bubble",component:ii},{path:"searchmap",component:ni}]}],oi=function(){var h,d=(0,x.Z)(function s(){(0,E.Z)(this,s)});return(h=d).\u0275fac=function(a){return new(a||h)},h.\u0275mod=c.\u0275\u0275defineNgModule({type:h}),h.\u0275inj=c.\u0275\u0275defineInjector({imports:[ce.Bz.forChild(St),ce.Bz]}),d}(),_e=function(){var h,d=(0,x.Z)(function s(){(0,E.Z)(this,s)});return(h=d).\u0275fac=function(a){return new(a||h)},h.\u0275mod=c.\u0275\u0275defineNgModule({type:h}),h.\u0275inj=c.\u0275\u0275defineInjector({imports:[ei.O,Ie,de.forRoot(),oi,Se.N,ot.zyh]}),d}()},98407:function(Rn,Je){!function(m){"use strict";var E=Object.freeze;function z(i){var t,e,n,o;for(e=1,n=arguments.length;e<n;e++)for(t in o=arguments[e])i[t]=o[t];return i}Object.freeze=function(i){return i};var Yt=Object.create||function(){function i(){}return function(t){return i.prototype=t,new i}}();function R(i,t){var e=Array.prototype.slice;if(i.bind)return i.bind.apply(i,e.call(arguments,1));var n=e.call(arguments,2);return function(){return i.apply(t,n.length?n.concat(e.call(arguments)):arguments)}}var ze=0;function c(i){return i._leaflet_id=i._leaflet_id||++ze,i._leaflet_id}function ke(i,t,e){var n,o,r,l;return l=function(){n=!1,o&&(r.apply(e,o),o=!1)},r=function(){n?o=arguments:(i.apply(e,arguments),setTimeout(l,t),n=!0)},r}function B(i,t,e){var n=t[1],o=t[0],r=n-o;return i===n&&e?i:((i-o)%r+r)%r+o}function et(){return!1}function V(i,t){var e=Math.pow(10,t||5);return Math.round(i*e)/e}function Lt(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function Wt(i){return Lt(i).split(/\s+/)}function S(i,t){for(var e in i.hasOwnProperty("options")||(i.options=i.options?Yt(i.options):{}),t)i.options[e]=t[e];return i.options}function xt(i,t,e){var n=[];for(var o in i)n.push(encodeURIComponent(e?o.toUpperCase():o)+"="+encodeURIComponent(i[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}var K=/\{ *([\w_\-]+) *\}/g;function Te(i,t){return i.replace(K,function(e,n){var o=t[n];if(void 0===o)throw new Error("No value provided for variable "+e);return"function"==typeof o&&(o=o(t)),o})}var W=Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)};function jt(i,t){for(var e=0;e<i.length;e++)if(i[e]===t)return e;return-1}var xe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function re(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Q=0;function Ye(i){var t=+new Date,e=Math.max(0,16-(t-Q));return Q=t+e,window.setTimeout(i,e)}var se=window.requestAnimationFrame||re("RequestAnimationFrame")||Ye,le=window.cancelAnimationFrame||re("CancelAnimationFrame")||re("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function it(i,t,e){if(!e||se!==Ye)return se.call(window,R(i,t));i.call(t)}function gt(i){i&&le.call(window,i)}var vi=(Object.freeze||Object)({freeze:E,extend:z,create:Yt,bind:R,lastId:ze,stamp:c,throttle:ke,wrapNum:B,falseFn:et,formatNum:V,trim:Lt,splitWords:Wt,setOptions:S,getParamString:xt,template:Te,isArray:W,indexOf:jt,emptyImageUrl:xe,requestFn:se,cancelFn:le,requestAnimFrame:it,cancelAnimFrame:gt});function wt(){}wt.extend=function(i){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},e=t.__super__=this.prototype,n=Yt(e);for(var o in n.constructor=t,t.prototype=n,this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return i.statics&&(z(t,i.statics),delete i.statics),i.includes&&(function yi(i){if(L&&L.Mixin){i=W(i)?i:[i];for(var t=0;t<i.length;t++)i[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(i.includes),z.apply(null,[n].concat(i.includes)),delete i.includes),n.options&&(i.options=z(Yt(n.options),i.options)),z(n,i),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){e.callInitHooks&&e.callInitHooks.call(this),this._initHooksCalled=!0;for(var r=0,l=n._initHooks.length;r<l;r++)n._initHooks[r].call(this)}},t},wt.include=function(i){return z(this.prototype,i),this},wt.mergeOptions=function(i){return z(this.prototype.options,i),this},wt.addInitHook=function(i){var t=Array.prototype.slice.call(arguments,1),e="function"==typeof i?i:function(){this[i].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(e),this};var at={on:function(t,e,n){if("object"==typeof t)for(var o in t)this._on(o,t[o],e);else for(var r=0,l=(t=Wt(t)).length;r<l;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var o in t)this._off(o,t[o],e);else for(var r=0,l=(t=Wt(t)).length;r<l;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var o=this._events[t];o||(this._events[t]=o=[]),n===this&&(n=void 0);for(var r={fn:e,ctx:n},l=o,g=0,_=l.length;g<_;g++)if(l[g].fn===e&&l[g].ctx===n)return;l.push(r)},_off:function(t,e,n){var o,r,l;if(this._events&&(o=this._events[t])){if(!e){for(r=0,l=o.length;r<l;r++)o[r].fn=et;return void delete this._events[t]}if(n===this&&(n=void 0),o)for(r=0,l=o.length;r<l;r++){var g=o[r];if(g.ctx===n&&g.fn===e)return g.fn=et,this._firingCount&&(this._events[t]=o=o.slice()),void o.splice(r,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=z({},e,{type:t,target:this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var l=0,g=r.length;l<g;l++){var _=r[l];_.fn.call(_.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var r=R(function(){this.off(t,e,n).off(t,r,n)},this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[c(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[c(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,z({layer:t.target},t),!0)}};at.addEventListener=at.on,at.removeEventListener=at.clearAllEventListeners=at.off,at.addOneTimeEventListener=at.once,at.fireEvent=at.fire,at.hasEventListeners=at.listens;var qt=wt.extend(at);function M(i,t,e){this.x=e?Math.round(i):i,this.y=e?Math.round(t):t}function k(i,t,e){return i instanceof M?i:W(i)?new M(i[0],i[1]):null==i?i:"object"==typeof i&&"x"in i&&"y"in i?new M(i.x,i.y):new M(i,t,e)}function G(i,t){if(i)for(var e=t?[i,t]:i,n=0,o=e.length;n<o;n++)this.extend(e[n])}function It(i,t){return!i||i instanceof G?i:new G(i,t)}function nt(i,t){if(i)for(var e=t?[i,t]:i,n=0,o=e.length;n<o;n++)this.extend(e[n])}function J(i,t){return i instanceof nt?i:new nt(i,t)}function D(i,t,e){if(isNaN(i)||isNaN(t))throw new Error("Invalid LatLng object: ("+i+", "+t+")");this.lat=+i,this.lng=+t,void 0!==e&&(this.alt=+e)}function N(i,t,e){return i instanceof D?i:W(i)&&"object"!=typeof i[0]?3===i.length?new D(i[0],i[1],i[2]):2===i.length?new D(i[0],i[1]):null:null==i?i:"object"==typeof i&&"lat"in i?new D(i.lat,"lng"in i?i.lng:i.lon,i.alt):void 0===t?null:new D(i,t,e)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(k(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(k(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){var e=(t=k(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=k(t)).x===this.x&&t.y===this.y},contains:function(t){return t=k(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+V(this.x)+", "+V(this.y)+")"}},G.prototype={extend:function(t){return t=k(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof M?k(t):It(t))instanceof G?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=It(t);var e=this.min,n=this.max,o=t.min,r=t.max;return r.x>=e.x&&o.x<=n.x&&r.y>=e.y&&o.y<=n.y},overlaps:function(t){t=It(t);var e=this.min,n=this.max,o=t.min,r=t.max;return r.x>e.x&&o.x<n.x&&r.y>e.y&&o.y<n.y},isValid:function(){return!(!this.min||!this.max)}},nt.prototype={extend:function(t){var o,r,e=this._southWest,n=this._northEast;if(t instanceof D)o=t,r=t;else{if(!(t instanceof nt))return t?this.extend(N(t)||J(t)):this;if(r=t._northEast,!(o=t._southWest)||!r)return this}return e||n?(e.lat=Math.min(o.lat,e.lat),e.lng=Math.min(o.lng,e.lng),n.lat=Math.max(r.lat,n.lat),n.lng=Math.max(r.lng,n.lng)):(this._southWest=new D(o.lat,o.lng),this._northEast=new D(r.lat,r.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,o=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new nt(new D(e.lat-o,e.lng-r),new D(n.lat+o,n.lng+r))},getCenter:function(){return new D((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new D(this.getNorth(),this.getWest())},getSouthEast:function(){return new D(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof D||"lat"in t?N(t):J(t);var o,r,e=this._southWest,n=this._northEast;return t instanceof nt?(o=t.getSouthWest(),r=t.getNorthEast()):o=r=t,o.lat>=e.lat&&r.lat<=n.lat&&o.lng>=e.lng&&r.lng<=n.lng},intersects:function(t){t=J(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),r=t.getNorthEast();return r.lat>=e.lat&&o.lat<=n.lat&&r.lng>=e.lng&&o.lng<=n.lng},overlaps:function(t){t=J(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),r=t.getNorthEast();return r.lat>e.lat&&o.lat<n.lat&&r.lng>e.lng&&o.lng<n.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=J(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},D.prototype={equals:function(t,e){return!!t&&(t=N(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+V(this.lat,t)+", "+V(this.lng,t)+")"},distanceTo:function(t){return Ot.distance(this,N(t))},wrap:function(){return Ot.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return J([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new D(this.lat,this.lng,this.alt)}};var i,bt={latLngToPoint:function(t,e){var n=this.projection.project(t),o=this.scale(e);return this.transformation._transform(n,o)},pointToLatLng:function(t,e){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new G(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?B(t.lng,this.wrapLng,!0):t.lng;return new D(this.wrapLat?B(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),o=e.lat-n.lat,r=e.lng-n.lng;if(0===o&&0===r)return t;var l=t.getSouthWest(),g=t.getNorthEast();return new nt(new D(l.lat-o,l.lng-r),new D(g.lat-o,g.lng-r))}},Ot=z({},bt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,o=t.lat*n,r=e.lat*n,l=Math.sin(o)*Math.sin(r)+Math.cos(o)*Math.cos(r)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(l,1))}}),qe={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),r=Math.sin(o*e);return new M(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new D((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(i=6378137*Math.PI,new G([-i,-i],[i,i]))};function Ie(i,t,e,n){if(W(i))return this._a=i[0],this._b=i[1],this._c=i[2],void(this._d=i[3]);this._a=i,this._b=t,this._c=e,this._d=n}function ue(i,t,e,n){return new Ie(i,t,e,n)}Ie.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new M((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Xe=z({},Ot,{code:"EPSG:3857",projection:qe,transformation:function(){var i=.5/(Math.PI*qe.R);return ue(i,.5,-i,.5)}()}),Rt=z({},Xe,{code:"EPSG:900913"});function _t(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Xt(i,t){var n,o,r,l,g,_,e="";for(n=0,r=i.length;n<r;n++){for(o=0,l=(g=i[n]).length;o<l;o++)e+=(o?"L":"M")+(_=g[o]).x+" "+_.y;e+=t?Re?"z":"x":""}return e||"M0 0"}var Qe=document.documentElement.style,Oe="ActiveXObject"in window,Et=Oe&&!document.addEventListener,Ut="msLaunchUri"in navigator&&!("documentMode"in document),Ee=h("webkit"),he=h("android"),Qt=h("android 2")||h("android 3"),$e=!!window.opera,de=h("chrome"),ti=h("gecko")&&!Ee&&!$e&&!Oe,Se=!de&&h("safari"),ot=h("phantom"),ei="OTransition"in Qe,ce=0===navigator.platform.indexOf("Win"),fe=Oe&&"transition"in Qe,ge="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qt,De="MozPerspective"in Qe,st=!window.L_DISABLE_3D&&(fe||ge||De)&&!ei&&!ot,Vt=typeof orientation<"u"||h("mobile"),Mi=Vt&&Ee,ii=Vt&&ge,pt=!window.PointerEvent&&window.MSPointerEvent,ut=!(!window.PointerEvent&&!pt),ht=!window.L_NO_TOUCH&&(ut||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ze=Vt&&$e,ni=Vt&&ti,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,oi=!!document.createElement("canvas").getContext,Re=!(!document.createElementNS||!_t("svg").createSVGRect),_e=!Re&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var t=i.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch{return!1}}();function h(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var d=(Object.freeze||Object)({ie:Oe,ielt9:Et,edge:Ut,webkit:Ee,android:he,android23:Qt,opera:$e,chrome:de,gecko:ti,safari:Se,phantom:ot,opera12:ei,win:ce,ie3d:fe,webkit3d:ge,gecko3d:De,any3d:st,mobile:Vt,mobileWebkit:Mi,mobileWebkit3d:ii,msPointer:pt,pointer:ut,touch:ht,mobileOpera:Ze,mobileGecko:ni,retina:St,canvas:oi,svg:Re,vml:_e}),s=pt?"MSPointerDown":"pointerdown",a=pt?"MSPointerMove":"pointermove",f=pt?"MSPointerUp":"pointerup",u=pt?"MSPointerCancel":"pointercancel",C=["INPUT","SELECT","OPTION"],b={},A=!1,Y=0;function q(i,t,e,n){return"touchstart"===t?function rt(i,t,e){var n=R(function(o){if("mouse"!==o.pointerType&&o.pointerType!==o.MSPOINTER_TYPE_MOUSE&&o.pointerType!==o.MSPOINTER_TYPE_MOUSE){if(!(C.indexOf(o.target.tagName)<0))return;yt(o)}ct(o,t)});i["_leaflet_touchstart"+e]=n,i.addEventListener(s,n,!1),A||(document.documentElement.addEventListener(s,Pt,!0),document.documentElement.addEventListener(a,mt,!0),document.documentElement.addEventListener(f,dt,!0),document.documentElement.addEventListener(u,dt,!0),A=!0)}(i,e,n):"touchmove"===t?function zt(i,t,e){var n=function(r){(r.pointerType===r.MSPOINTER_TYPE_MOUSE||"mouse"===r.pointerType)&&0===r.buttons||ct(r,t)};i["_leaflet_touchmove"+e]=n,i.addEventListener(a,n,!1)}(i,e,n):"touchend"===t&&function vt(i,t,e){var n=function(r){ct(r,t)};i["_leaflet_touchend"+e]=n,i.addEventListener(f,n,!1),i.addEventListener(u,n,!1)}(i,e,n),this}function Pt(i){b[i.pointerId]=i,Y++}function mt(i){b[i.pointerId]&&(b[i.pointerId]=i)}function dt(i){delete b[i.pointerId],Y--}function ct(i,t){for(var e in i.touches=[],b)i.touches.push(b[e]);i.changedTouches=[i],t(i)}var lt=pt?"MSPointerDown":ut?"pointerdown":"touchstart",ft=pt?"MSPointerUp":ut?"pointerup":"touchend",Z="_leaflet_";function tn(i,t,e){var n,o,r=!1,l=250;function g(p){var v;if(ut){if(!Ut||"mouse"===p.pointerType)return;v=Y}else v=p.touches.length;if(!(v>1)){var y=Date.now(),w=y-(n||y);o=p.touches?p.touches[0]:p,r=w>0&&w<=l,n=y}}function _(p){if(r&&!o.cancelBubble){if(ut){if(!Ut||"mouse"===p.pointerType)return;var y,w,v={};for(w in o)v[w]=(y=o[w])&&y.bind?y.bind(o):y;o=v}o.type="dblclick",t(o),n=null}}return i[Z+lt+e]=g,i[Z+ft+e]=_,i[Z+"dblclick"+e]=t,i.addEventListener(lt,g,!1),i.addEventListener(ft,_,!1),i.addEventListener("dblclick",t,!1),this}function en(i,t){var n=i[Z+ft+t],o=i[Z+"dblclick"+t];return i.removeEventListener(lt,i[Z+lt+t],!1),i.removeEventListener(ft,n,!1),Ut||i.removeEventListener("dblclick",o,!1),this}function P(i,t,e,n){if("object"==typeof t)for(var o in t)ai(i,o,t[o],e);else for(var r=0,l=(t=Wt(t)).length;r<l;r++)ai(i,t[r],e,n);return this}var kt="_leaflet_events";function U(i,t,e,n){if("object"==typeof t)for(var o in t)Ci(i,o,t[o],e);else if(t)for(var r=0,l=(t=Wt(t)).length;r<l;r++)Ci(i,t[r],e,n);else{for(var g in i[kt])Ci(i,g,i[kt][g]);delete i[kt]}return this}function ai(i,t,e,n){var o=t+c(e)+(n?"_"+c(n):"");if(i[kt]&&i[kt][o])return this;var r=function(_){return e.call(n||i,_||window.event)},l=r;ut&&0===t.indexOf("touch")?q(i,t,r,o):!ht||"dblclick"!==t||!tn||ut&&de?"addEventListener"in i?"mousewheel"===t?i.addEventListener("onwheel"in i?"wheel":"mousewheel",r,!1):"mouseenter"===t||"mouseleave"===t?i.addEventListener("mouseenter"===t?"mouseover":"mouseout",r=function(_){_=_||window.event,ri(i,_)&&l(_)},!1):("click"===t&&he&&(r=function(_){!function Bn(i,t){var e=i.timeStamp||i.originalEvent&&i.originalEvent.timeStamp,n=zi&&e-zi;n&&n>100&&n<500||i.target._simulatedClick&&!i._simulated?Dt(i):(zi=e,t(i))}(_,l)}),i.addEventListener(t,r,!1)):"attachEvent"in i&&i.attachEvent("on"+t,r):tn(i,r,o),i[kt]=i[kt]||{},i[kt][o]=r}function Ci(i,t,e,n){var o=t+c(e)+(n?"_"+c(n):""),r=i[kt]&&i[kt][o];if(!r)return this;ut&&0===t.indexOf("touch")?function F(i,t,e){var n=i["_leaflet_"+t+e];return"touchstart"===t?i.removeEventListener(s,n,!1):"touchmove"===t?i.removeEventListener(a,n,!1):"touchend"===t&&(i.removeEventListener(f,n,!1),i.removeEventListener(u,n,!1)),this}(i,t,o):ht&&"dblclick"===t&&en?en(i,o):"removeEventListener"in i?i.removeEventListener("mousewheel"===t?"onwheel"in i?"wheel":"mousewheel":"mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,r,!1):"detachEvent"in i&&i.detachEvent("on"+t,r),i[kt][o]=null}function $t(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,Pi(i),this}function Li(i){return ai(i,"mousewheel",$t),this}function Ae(i){return P(i,"mousedown touchstart dblclick",$t),ai(i,"click",bi),this}function yt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Dt(i){return yt(i),$t(i),this}function nn(i,t){if(!t)return new M(i.clientX,i.clientY);var e=t.getBoundingClientRect();return new M(i.clientX-e.left-t.clientLeft,i.clientY-e.top-t.clientTop)}var An=ce&&de?2*window.devicePixelRatio:ti?window.devicePixelRatio:1;function on(i){return Ut?i.wheelDeltaY/2:i.deltaY&&0===i.deltaMode?-i.deltaY/An:i.deltaY&&1===i.deltaMode?20*-i.deltaY:i.deltaY&&2===i.deltaMode?60*-i.deltaY:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?20*-i.detail:i.detail?i.detail/-32765*60:0}var zi,wi={};function bi(i){wi[i.type]=!0}function Pi(i){var t=wi[i.type];return wi[i.type]=!1,t}function ri(i,t){var e=t.relatedTarget;if(!e)return!0;try{for(;e&&e!==i;)e=e.parentNode}catch{return!1}return e!==i}var Ne,Fe,Oi,ui,Di,Gn=(Object.freeze||Object)({on:P,off:U,stopPropagation:$t,disableScrollPropagation:Li,disableClickPropagation:Ae,preventDefault:yt,stop:Dt,getMousePosition:nn,getWheelDelta:on,fakeStop:bi,skipped:Pi,isExternalTarget:ri,addListener:P,removeListener:U}),ki=li(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),Be=li(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),an="webkitTransition"===Be||"OTransition"===Be?Be+"End":"transitionend";function rn(i){return"string"==typeof i?document.getElementById(i):i}function Ge(i,t){var e=i.style[t]||i.currentStyle&&i.currentStyle[t];if((!e||"auto"===e)&&document.defaultView){var n=document.defaultView.getComputedStyle(i,null);e=n?n[t]:null}return"auto"===e?null:e}function I(i,t,e){var n=document.createElement(i);return n.className=t||"",e&&e.appendChild(n),n}function H(i){var t=i.parentNode;t&&t.removeChild(i)}function Ti(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function pe(i){var t=i.parentNode;t.lastChild!==i&&t.appendChild(i)}function me(i){var t=i.parentNode;t.firstChild!==i&&t.insertBefore(i,t.firstChild)}function xi(i,t){if(void 0!==i.classList)return i.classList.contains(t);var e=si(i);return e.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e)}function O(i,t){if(void 0!==i.classList)for(var e=Wt(t),n=0,o=e.length;n<o;n++)i.classList.add(e[n]);else if(!xi(i,t)){var r=si(i);Ii(i,(r?r+" ":"")+t)}}function j(i,t){void 0!==i.classList?i.classList.remove(t):Ii(i,Lt((" "+si(i)+" ").replace(" "+t+" "," ")))}function Ii(i,t){void 0===i.className.baseVal?i.className=t:i.className.baseVal=t}function si(i){return void 0===i.className.baseVal?i.className:i.className.baseVal}function Mt(i,t){"opacity"in i.style?i.style.opacity=t:"filter"in i.style&&function Nn(i,t){var e=!1,n="DXImageTransform.Microsoft.Alpha";try{e=i.filters.item(n)}catch{if(1===t)return}t=Math.round(100*t),e?(e.Enabled=100!==t,e.Opacity=t):i.style.filter+=" progid:"+n+"(opacity="+t+")"}(i,t)}function li(i){for(var t=document.documentElement.style,e=0;e<i.length;e++)if(i[e]in t)return i[e];return!1}function te(i,t,e){var n=t||new M(0,0);i.style[ki]=(fe?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(e?" scale("+e+")":"")}function $(i,t){i._leaflet_pos=t,st?te(i,t):(i.style.left=t.x+"px",i.style.top=t.y+"px")}function ee(i){return i._leaflet_pos||new M(0,0)}if("onselectstart"in document)Ne=function(){P(window,"selectstart",yt)},Fe=function(){U(window,"selectstart",yt)};else{var He=li(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ne=function(){if(He){var t=document.documentElement.style;Oi=t[He],t[He]="none"}},Fe=function(){He&&(document.documentElement.style[He]=Oi,Oi=void 0)}}function Ei(){P(window,"dragstart",yt)}function Si(){U(window,"dragstart",yt)}function Zi(i){for(;-1===i.tabIndex;)i=i.parentNode;i.style&&(hi(),ui=i,Di=i.style.outline,i.style.outline="none",P(window,"keydown",hi))}function hi(){ui&&(ui.style.outline=Di,ui=void 0,Di=void 0,U(window,"keydown",hi))}var Fn=(Object.freeze||Object)({TRANSFORM:ki,TRANSITION:Be,TRANSITION_END:an,get:rn,getStyle:Ge,create:I,remove:H,empty:Ti,toFront:pe,toBack:me,hasClass:xi,addClass:O,removeClass:j,setClass:Ii,getClass:si,setOpacity:Mt,testProp:li,setTransform:te,setPosition:$,getPosition:ee,disableTextSelection:Ne,enableTextSelection:Fe,disableImageDrag:Ei,enableImageDrag:Si,preventOutline:Zi,restoreOutline:hi}),sn=qt.extend({run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=ee(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=it(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),$(this._el,n),this.fire("step")},_complete:function(){gt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),T=qt.extend({options:{crs:Xe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=S(this,e),this._initContainer(t),this._initLayout(),this._onResize=R(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(N(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=Be&&st&&!Ze&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),P(this._proxy,an,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(N(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=z({animate:n.animate},n.zoom),n.pan=z({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t=t||(st?this.options.zoomDelta:1)),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t=t||(st?this.options.zoomDelta:1)),e)},setZoomAround:function(t,e,n){var o=this.getZoomScale(e),r=this.getSize().divideBy(2),g=(t instanceof M?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/o),_=this.containerPointToLatLng(r.add(g));return this.setView(_,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():J(t);var n=k(e.paddingTopLeft||e.padding||[0,0]),o=k(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(o));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var l=o.subtract(n).divideBy(2),g=this.project(t.getSouthWest(),r),_=this.project(t.getNorthEast(),r);return{center:this.unproject(g.add(_).divideBy(2).add(l),r),zoom:r}},fitBounds:function(t,e){if(!(t=J(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=k(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new sn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){O(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!st)return this.setView(t,e,n);this._stop();var o=this.project(this.getCenter()),r=this.project(t),l=this.getSize(),g=this._zoom;t=N(t),e=void 0===e?g:e;var _=Math.max(l.x,l.y),p=_*this.getZoomScale(g,e),v=r.distanceTo(o)||1,y=1.42,w=y*y;function tt(X){var $i=(p*p-_*_+(X?-1:1)*w*w*v*v)/(2*(X?p:_)*w*v),Zn=Math.sqrt($i*$i+1)-$i;return Zn<1e-9?-18:Math.log(Zn)}function Ht(X){return(Math.exp(X)-Math.exp(-X))/2}function ae(X){return(Math.exp(X)+Math.exp(-X))/2}var Jt=tt(0);function Po(X){return _*(ae(Jt)*function Qi(X){return Ht(X)/ae(X)}(Jt+y*X)-Ht(Jt))/w}var ko=Date.now(),Sn=(tt(1)-Jt)/y,To=n.duration?1e3*n.duration:1e3*Sn*.8;return this._moveStart(!0),function Dn(){var X=(Date.now()-ko)/To,mi=function zo(X){return 1-Math.pow(1-X,1.5)}(X)*Sn;X<=1?(this._flyToFrame=it(Dn,this),this._move(this.unproject(o.add(r.subtract(o).multiplyBy(Po(mi)/v)),g),this.getScaleZoom(_/function bo(X){return _*(ae(Jt)/ae(Jt+y*X))}(mi),g),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=J(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),o=this._limitCenter(n,this._zoom,J(t));return n.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=z({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),r=n.divideBy(2).round(),l=o.subtract(r);return l.x||l.y?(t.animate&&t.pan?this.panBy(l):(t.pan&&this._rawPanBy(l),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(R(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=z({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=R(this._handleGeolocationResponse,this),n=R(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var o=new D(t.coords.latitude,t.coords.longitude),r=o.toBounds(t.coords.accuracy),l=this._locateOptions;if(l.setView){var g=this.getBoundsZoom(r);this.setView(o,l.maxZoom?Math.min(g,l.maxZoom):g)}var _={latlng:o,bounds:r,timestamp:t.timestamp};for(var p in t.coords)"number"==typeof t.coords[p]&&(_[p]=t.coords[p]);this.fire("locationfound",_)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in H(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)H(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var o=I("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new nt(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=J(t),n=k(n||[0,0]);var o=this.getZoom()||0,r=this.getMinZoom(),l=this.getMaxZoom(),g=t.getNorthWest(),_=t.getSouthEast(),p=this.getSize().subtract(n),v=It(this.project(_,o),this.project(g,o)).getSize(),y=st?this.options.zoomSnap:1,w=p.x/v.x,tt=p.y/v.y,Ht=e?Math.max(w,tt):Math.min(w,tt);return o=this.getScaleZoom(Ht,o),y&&(o=Math.round(o/(y/100))*(y/100),o=e?Math.ceil(o/y)*y:Math.floor(o/y)*y),Math.max(r,Math.min(l,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new G(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs,o=n.zoom(t*n.scale(e=void 0===e?this._zoom:e));return isNaN(o)?1/0:o},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(N(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(k(t),e)},layerPointToLatLng:function(t){var e=k(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(N(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(N(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(J(t))},distance:function(t,e){return this.options.crs.distance(N(t),N(e))},containerPointToLayerPoint:function(t){return k(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return k(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(k(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(N(t)))},mouseEventToContainerPoint:function(t){return nn(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=rn(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");P(e,"scroll",this._onScroll,this),this._containerId=c(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&st,O(t,"leaflet-container"+(ht?" leaflet-touch":"")+(St?" leaflet-retina":"")+(Et?" leaflet-oldie":"")+(Se?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Ge(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(O(t.markerPane,"leaflet-zoom-hide"),O(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){$(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o)._move(t,e)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){void 0===e&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return gt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){$(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[c(this._container)]=this;var e=t?U:P;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),st&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){gt(this._resizeRequest),this._resizeRequest=it(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o,n=[],r="mouseout"===e||"mouseover"===e,l=t.target||t.srcElement,g=!1;l;){if((o=this._targets[c(l)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(o)){g=!0;break}if(o&&o.listens(e,!0)&&(r&&!ri(l,t)||(n.push(o),r))||l===this._container)break;l=l.parentNode}return!n.length&&!g&&!r&&ri(l,t)&&(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!Pi(t)){var e=t.type;("mousedown"===e||"keypress"===e)&&Zi(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=z({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var r=n[0];"contextmenu"===e&&r.listens(e,!0)&&yt(t);var l={originalEvent:t};if("keypress"!==t.type){var g=r.options&&"icon"in r.options;l.containerPoint=g?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=g?r.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(var _=0;_<n.length;_++)if(n[_].fire(e,l,!0),l.originalEvent._stopped||!1===n[_].options.bubblingMouseEvents&&-1!==jt(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ee(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return It([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var o=this.project(t,e),r=this.getSize().divideBy(2),l=new G(o.subtract(r),o.add(r)),g=this._getBoundsOffset(l,n,e);return g.round().equals([0,0])?t:this.unproject(o.add(g),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),o=new G(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,n){var o=It(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=o.min.subtract(t.min),l=o.max.subtract(t.max);return new M(this._rebound(r.x,-l.x),this._rebound(r.y,-l.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),o=st?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){j(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=I("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=ki,o=this._proxy.style[n];te(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),n=this.getZoom();te(this._proxy,this.project(e,n),this.getZoomScale(n,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){H(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/o);return!(!0!==n.animate&&!this.getSize().contains(r)||(it(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,o){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,O(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(R(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(j(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),it(function(){this._moveEnd(!0)},this))}});var Tt=wt.extend({options:{position:"topright"},initialize:function(t){S(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return O(e,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},remove:function(){return this._map?(H(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),We=function(t){return new Tt(t)};T.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=I("div",e+"control-container",this._container);function o(r,l){t[r+l]=I("div",e+r+" "+e+l,n)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)H(this._controlCorners[t]);H(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ln=Tt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,o){return n<o?-1:o<n?1:0}},initialize:function(t,e,n){for(var o in S(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Tt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(c(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){O(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(O(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):j(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return j(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=I("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ae(e),Li(e);var o=this._form=I("form",t+"-list");n&&(this._map.on("click",this.collapse,this),he||P(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=I("a",t+"-toggle",e);r.href="#",r.title="Layers",ht?(P(r,"click",Dt),P(r,"click",this.expand,this)):P(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=I("div",t+"-base",o),this._separator=I("div",t+"-separator",o),this._overlaysList=I("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&c(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(R(function(o,r){return this.options.sortFunction(o.layer,r.layer,o.name,r.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ti(this._baseLayersList),Ti(this._overlaysList),this._layerControlInputs=[];var t,e,n,o,r=0;for(n=0;n<this._layers.length;n++)this._addItem(o=this._layers[n]),e=e||o.overlay,t=t||!o.overlay,r+=o.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&r>1)?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(c(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var o,e=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((o=document.createElement("input")).type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=n):o=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(o),o.layerId=c(t.layer),P(o,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var l=document.createElement("div");return e.appendChild(l),l.appendChild(o),l.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var e,n,t=this._layerControlInputs,o=[],r=[];this._handlingClick=!0;for(var l=t.length-1;l>=0;l--)n=this._getLayer((e=t[l]).layerId).layer,e.checked?o.push(n):e.checked||r.push(n);for(l=0;l<r.length;l++)this._map.hasLayer(r[l])&&this._map.removeLayer(r[l]);for(l=0;l<o.length;l++)this._map.hasLayer(o[l])||this._map.addLayer(o[l]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,n,t=this._layerControlInputs,o=this._map.getZoom(),r=t.length-1;r>=0;r--)n=this._getLayer((e=t[r]).layerId).layer,e.disabled=void 0!==n.options.minZoom&&o<n.options.minZoom||void 0!==n.options.maxZoom&&o>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ri=Tt.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=I("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,o,r){var l=I("a",n,o);return l.innerHTML=t,l.href="#",l.title=e,l.setAttribute("role","button"),l.setAttribute("aria-label",e),Ae(l),P(l,"click",Dt),P(l,"click",r,this),P(l,"click",this._refocusOnMap,this),l},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";j(this._zoomInButton,e),j(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&O(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&O(this._zoomInButton,e)}});T.mergeOptions({zoomControl:!0}),T.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ri,this.addControl(this.zoomControl))});var un=Tt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=I("div",e),o=this.options;return this._addScales(o,e+"-line",n),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=I("div",e,n)),t.imperial&&(this._iScale=I("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var n,o,r,e=3.2808399*t;e>5280?(o=this._getRoundNum(n=e/5280),this._updateScale(this._iScale,o+" mi",o/n)):(r=this._getRoundNum(e),this._updateScale(this._iScale,r+" ft",r/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Ai=Tt.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){S(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=I("div","leaflet-control-attribution"),Ae(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});T.mergeOptions({attributionControl:!0}),T.addInitHook(function(){this.options.attributionControl&&(new Ai).addTo(this)});Tt.Layers=ln,Tt.Zoom=Ri,Tt.Scale=un,Tt.Attribution=Ai,We.layers=function(t,e,n){return new ln(t,e,n)},We.zoom=function(t){return new Ri(t)},We.scale=function(t){return new un(t)},We.attribution=function(t){return new Ai(t)};var gn,At=wt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),Kn={Events:at},hn=ht?"touchstart mousedown":"mousedown",dn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Bi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ie=qt.extend({options:{clickTolerance:3},initialize:function(t,e,n,o){S(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(P(this._dragStartTarget,hn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ie._dragging===this&&this.finishDrag(),U(this._dragStartTarget,hn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!xi(this._element,"leaflet-zoom-anim")&&!(ie._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(ie._dragging=this,this._preventOutline&&Zi(this._element),Ei(),Ne(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new M(e.clientX,e.clientY),P(document,Bi[t.type],this._onMove,this),P(document,dn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,o=new M(e.clientX,e.clientY).subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(yt(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ee(this._element).subtract(o),O(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),O(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,gt(this._animRequest),this._lastEvent=t,this._animRequest=it(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),$(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var t in j(document.body,"leaflet-dragging"),this._lastTarget&&(j(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bi)U(document,Bi[t],this._onMove,this),U(document,dn[t],this._onUp,this);Si(),Fe(),this._moved&&this._moving&&(gt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ie._dragging=!1}});function cn(i,t){if(!t||!i.length)return i.slice();var e=t*t;return function Yn(i,t){var e=i.length,o=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(e);o[0]=o[e-1]=1,Gi(i,o,t,0,e-1);var r,l=[];for(r=0;r<e;r++)o[r]&&l.push(i[r]);return l}(i=function qn(i,t){for(var e=[i[0]],n=1,o=0,r=i.length;n<r;n++)Xn(i[n],i[o])>t&&(e.push(i[n]),o=n);return o<r-1&&e.push(i[r-1]),e}(i,e),e)}function fn(i,t,e){return Math.sqrt(je(i,t,e,!0))}function Gi(i,t,e,n,o){var l,g,_,r=0;for(g=n+1;g<=o-1;g++)(_=je(i[g],i[n],i[o],!0))>r&&(l=g,r=_);r>e&&(t[l]=1,Gi(i,t,e,n,l),Gi(i,t,e,l,o))}function _n(i,t,e,n,o){var g,_,p,r=n?gn:ne(i,e),l=ne(t,e);for(gn=l;;){if(!(r|l))return[i,t];if(r&l)return!1;p=ne(_=di(i,t,g=r||l,e,o),e),g===r?(i=_,r=p):(t=_,l=p)}}function di(i,t,e,n,o){var p,v,r=t.x-i.x,l=t.y-i.y,g=n.min,_=n.max;return 8&e?(p=i.x+r*(_.y-i.y)/l,v=_.y):4&e?(p=i.x+r*(g.y-i.y)/l,v=g.y):2&e?(p=_.x,v=i.y+l*(_.x-i.x)/r):1&e&&(p=g.x,v=i.y+l*(g.x-i.x)/r),new M(p,v,o)}function ne(i,t){var e=0;return i.x<t.min.x?e|=1:i.x>t.max.x&&(e|=2),i.y<t.min.y?e|=4:i.y>t.max.y&&(e|=8),e}function Xn(i,t){var e=t.x-i.x,n=t.y-i.y;return e*e+n*n}function je(i,t,e,n){var p,o=t.x,r=t.y,l=e.x-o,g=e.y-r,_=l*l+g*g;return _>0&&((p=((i.x-o)*l+(i.y-r)*g)/_)>1?(o=e.x,r=e.y):p>0&&(o+=l*p,r+=g*p)),l=i.x-o,g=i.y-r,n?l*l+g*g:new M(o,r)}function Bt(i){return!W(i[0])||"object"!=typeof i[0][0]&&typeof i[0][0]<"u"}function pn(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Bt(i)}var Qn=(Object.freeze||Object)({simplify:cn,pointToSegmentDistance:fn,closestPointOnSegment:function Jn(i,t,e){return je(i,t,e)},clipSegment:_n,_getEdgeIntersection:di,_getBitCode:ne,_sqClosestPointOnSegment:je,isFlat:Bt,_flat:pn});function mn(i,t,e){var n,r,l,g,_,p,v,y,w,o=[1,4,2,8];for(r=0,v=i.length;r<v;r++)i[r]._code=ne(i[r],t);for(g=0;g<4;g++){for(y=o[g],n=[],r=0,l=(v=i.length)-1;r<v;l=r++)p=i[l],(_=i[r])._code&y?p._code&y||((w=di(p,_,y,t,e))._code=ne(w,t),n.push(w)):(p._code&y&&((w=di(p,_,y,t,e))._code=ne(w,t),n.push(w)),n.push(_));i=n}return i}var $n=(Object.freeze||Object)({clipPolygon:mn}),Ni={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new D(t.y,t.x)},bounds:new G([-180,-90],[180,90])},Fi={R:6378137,R_MINOR:6356752.314245179,bounds:new G([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,o=t.lat*e,r=this.R_MINOR/n,l=Math.sqrt(1-r*r),g=l*Math.sin(o),_=Math.tan(Math.PI/4-o/2)/Math.pow((1-g)/(1+g),l/2);return o=-n*Math.log(Math.max(_,1e-10)),new M(t.lng*e*n,o)},unproject:function(t){for(var v,e=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),l=Math.exp(-t.y/n),g=Math.PI/2-2*Math.atan(l),_=0,p=.1;_<15&&Math.abs(p)>1e-7;_++)v=r*Math.sin(g),v=Math.pow((1-v)/(1+v),r/2),g+=p=Math.PI/2-2*Math.atan(l*v)-g;return new D(g*e,t.x*e/n)}},to=(Object.freeze||Object)({LonLat:Ni,Mercator:Fi,SphericalMercator:qe}),eo=z({},Ot,{code:"EPSG:3395",projection:Fi,transformation:function(){var i=.5/(Math.PI*Fi.R);return ue(i,.5,-i,.5)}()}),vn=z({},Ot,{code:"EPSG:4326",projection:Ni,transformation:ue(1/180,1,-1/180,.5)}),io=z({},bt,{projection:Ni,transformation:ue(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(n*n+o*o)},infinite:!0});bt.Earth=Ot,bt.EPSG3395=eo,bt.EPSG3857=Xe,bt.EPSG900913=Rt,bt.EPSG4326=vn,bt.Simple=io;var Ct=qt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[c(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[c(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});T.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=c(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=c(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&c(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?W(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[c(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=c(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var r=this._zoomBoundLayers[o].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ve=Ct.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var n,o,e=Array.prototype.slice.call(arguments,1);for(n in this._layers)(o=this._layers[n])[t]&&o[t].apply(o,e);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c(t)}}),oe=ve.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ve.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ve.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new nt;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),ye=wt.extend({initialize:function(t){S(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(o,t),o},_setIconStyles:function(t,e){var n=this.options,o=n[e+"Size"];"number"==typeof o&&(o=[o,o]);var r=k(o),l=k("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),l&&(t.style.marginLeft=-l.x+"px",t.style.marginTop=-l.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return St&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Ue=ye.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ue.imagePath||(Ue.imagePath=this._detectIconPath()),(this.options.imagePath||Ue.imagePath)+ye.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=I("div","leaflet-default-icon-path",document.body),e=Ge(t,"background-image")||Ge(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,"")}}),yn=At.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ie(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),O(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&j(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,o=ee(e._icon),r=e._map.layerPointToLatLng(o);n&&$(n,o),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ve=Ct.extend({options:{icon:new Ue,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){S(this,e),this._latlng=N(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),O(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),l=!1;r!==this._shadow&&(this._removeShadow(),l=!0),r&&(O(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&l&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),H(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&H(this._shadow),this._shadow=null},_setPos:function(t){$(this._icon,t),this._shadow&&$(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(O(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;Mt(this._icon,t),this._shadow&&Mt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}});var Kt=Ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return S(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(ht?10:0)}}),ci=Kt.extend({options:{fill:!0,radius:10},initialize:function(t,e){S(this,e),this._latlng=N(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=N(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Kt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),o=[t+n,e+n];this._pxBounds=new G(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Hi=ci.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=z({},n,{radius:e})),S(this,e),this._latlng=N(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new nt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Kt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,o=n.options.crs;if(o.distance===Ot.distance){var r=Math.PI/180,l=this._mRadius/Ot.R/r,g=n.project([e+l,t]),_=n.project([e-l,t]),p=g.add(_).divideBy(2),v=n.unproject(p).lat,y=Math.acos((Math.cos(l*r)-Math.sin(e*r)*Math.sin(v*r))/(Math.cos(e*r)*Math.cos(v*r)))/r;(isNaN(y)||0===y)&&(y=l/Math.cos(Math.PI/180*e)),this._point=p.subtract(n.getPixelOrigin()),this._radius=isNaN(y)?0:Math.max(Math.round(p.x-n.project([v,t-y]).x),1),this._radiusY=Math.max(Math.round(p.y-g.y),1)}else{var w=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(w).x}this._updateBounds()}});var Gt=Kt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){S(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var r,l,e=1/0,n=null,o=je,g=0,_=this._parts.length;g<_;g++)for(var p=this._parts[g],v=1,y=p.length;v<y;v++){var w=o(t,r=p[v-1],l=p[v],!0);w<e&&(e=w,n=o(t,r,l))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,r,l,g,_=this._rings[0],p=_.length;if(!p)return null;for(t=0,e=0;t<p-1;t++)e+=_[t].distanceTo(_[t+1])/2;if(0===e)return this._map.layerPointToLatLng(_[0]);for(t=0,o=0;t<p-1;t++)if((o+=n=(r=_[t]).distanceTo(l=_[t+1]))>e)return this._map.layerPointToLatLng([l.x-(g=(o-e)/n)*(l.x-r.x),l.y-g*(l.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=N(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new nt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Bt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Bt(t),o=0,r=t.length;o<r;o++)n?(e[o]=N(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new M(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var l,g,r=t.length;if(t[0]instanceof D){for(g=[],l=0;l<r;l++)g[l]=this._map.latLngToLayerPoint(t[l]),n.extend(g[l]);e.push(g)}else for(l=0;l<r;l++)this._projectLatlngs(t[l],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var n,o,r,l,g,_,p,e=this._parts;for(n=0,r=0,l=this._rings.length;n<l;n++)for(o=0,g=(p=this._rings[n]).length;o<g-1;o++)(_=_n(p[o],p[o+1],t,o,!0))&&(e[r]=e[r]||[],e[r].push(_[0]),(_[1]!==p[o+1]||o===g-2)&&(e[r].push(_[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,o=t.length;n<o;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,o,r,l,g,_,p=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,l=this._parts.length;n<l;n++)for(o=0,r=(g=(_=this._parts[n]).length)-1;o<g;r=o++)if((e||0!==o)&&fn(t,_[r],_[o])<=p)return!0;return!1}});Gt._flat=pn;var Me=Gt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,r,l,g,_,v=this._rings[0],y=v.length;if(!y)return null;for(l=g=_=0,t=0,e=y-1;t<y;e=t++)g+=((n=v[t]).x+(o=v[e]).x)*(r=n.y*o.x-o.y*n.x),_+=(n.y+o.y)*r,l+=3*r;return this._map.layerPointToLatLng(0===l?v[0]:[g/l,_/l])},_convertLatLngs:function(t){var e=Gt.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof D&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Gt.prototype._setLatLngs.call(this,t),Bt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Bt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new M(e,e);if(t=new G(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var l,o=0,r=this._rings.length;o<r;o++)(l=mn(this._rings[o],t,!0)).length&&this._parts.push(l)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var n,o,r,l,g,_,p,v,e=!1;if(!this._pxBounds.contains(t))return!1;for(l=0,p=this._parts.length;l<p;l++)for(g=0,_=(v=(n=this._parts[l]).length)-1;g<v;_=g++)(o=n[g]).y>t.y!=(r=n[_]).y>t.y&&t.x<(r.x-o.x)*(t.y-o.y)/(r.y-o.y)+o.x&&(e=!e);return e||Gt.prototype._containsPoint.call(this,t,!0)}});var Nt=oe.extend({initialize:function(t,e){S(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var n,o,r,e=W(t)?t:t.features;if(e){for(n=0,o=e.length;n<o;n++)((r=e[n]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var l=this.options;if(l.filter&&!l.filter(t))return this;var g=Wi(t,l);return g?(g.feature=_i(t),g.defaultOptions=g.options,this.resetStyle(g),l.onEachFeature&&l.onEachFeature(t,g),this.addLayer(g)):this},resetStyle:function(t){return t.options=z({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Wi(i,t){var g,_,p,v,e="Feature"===i.type?i.geometry:i,n=e?e.coordinates:null,o=[],r=t&&t.pointToLayer,l=t&&t.coordsToLatLng||ji;if(!n&&!e)return null;switch(e.type){case"Point":return g=l(n),r?r(i,g):new Ve(g);case"MultiPoint":for(p=0,v=n.length;p<v;p++)g=l(n[p]),o.push(r?r(i,g):new Ve(g));return new oe(o);case"LineString":case"MultiLineString":return _=fi(n,"LineString"===e.type?0:1,l),new Gt(_,t);case"Polygon":case"MultiPolygon":return _=fi(n,"Polygon"===e.type?1:2,l),new Me(_,t);case"GeometryCollection":for(p=0,v=e.geometries.length;p<v;p++){var y=Wi({geometry:e.geometries[p],type:"Feature",properties:i.properties},t);y&&o.push(y)}return new oe(o);default:throw new Error("Invalid GeoJSON object.")}}function ji(i){return new D(i[1],i[0],i[2])}function fi(i,t,e){for(var l,n=[],o=0,r=i.length;o<r;o++)l=t?fi(i[o],t-1,e):(e||ji)(i[o]),n.push(l);return n}function Ui(i,t){return t="number"==typeof t?t:6,void 0!==i.alt?[V(i.lng,t),V(i.lat,t),V(i.alt,t)]:[V(i.lng,t),V(i.lat,t)]}function gi(i,t,e,n){for(var o=[],r=0,l=i.length;r<l;r++)o.push(t?gi(i[r],t-1,e,n):Ui(i[r],n));return!t&&e&&o.push(o[0]),o}function Ce(i,t){return i.feature?z({},i.feature,{geometry:t}):_i(t)}function _i(i){return"Feature"===i.type||"FeatureCollection"===i.type?i:{type:"Feature",properties:{},geometry:i}}var Vi={toGeoJSON:function(t){return Ce(this,{type:"Point",coordinates:Ui(this.getLatLng(),t)})}};function Mn(i,t){return new Nt(i,t)}Ve.include(Vi),Hi.include(Vi),ci.include(Vi),Gt.include({toGeoJSON:function(t){var e=!Bt(this._latlngs);return Ce(this,{type:(e?"Multi":"")+"LineString",coordinates:gi(this._latlngs,e?1:0,!1,t)})}}),Me.include({toGeoJSON:function(t){var e=!Bt(this._latlngs),n=e&&!Bt(this._latlngs[0]),o=gi(this._latlngs,n?2:e?1:0,!0,t);return e||(o=[o]),Ce(this,{type:(n?"Multi":"")+"Polygon",coordinates:o})}}),ve.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Ce(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,o=[];return this.eachLayer(function(r){if(r.toGeoJSON){var l=r.toGeoJSON(t);if(n)o.push(l.geometry);else{var g=_i(l);"FeatureCollection"===g.type?o.push.apply(o,g.features):o.push(g)}}}),n?Ce(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var co=Mn,Ki=Ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=J(e),S(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(O(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){H(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&pe(this._image),this},bringToBack:function(){return this._map&&me(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=J(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=I("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":"")+(this.options.className||""));t.onselectstart=et,t.onmousemove=et,t.onload=R(this.fire,this,"load"),t.onerror=R(this._overlayOnError,this,"error"),this.options.crossOrigin&&(t.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;te(this._image,n,e)},_reset:function(){var t=this._image,e=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();$(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Mt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Cn=Ki.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:I("video");if(e.class=e.class||"",e.class+="leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""),e.onselectstart=et,e.onmousemove=et,e.onloadeddata=R(this.fire,this,"load"),!t){W(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var n=0;n<this._url.length;n++){var o=I("source");o.src=this._url[n],e.appendChild(o)}}}});var Ft=Ct.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){S(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Mt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Mt(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Mt(this._container,0),this._removeTimeout=setTimeout(R(H,void 0,this._container),200)):H(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=N(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pe(this._container),this},bringToBack:function(){return this._map&&me(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=k(this.options.offset),n=this._getAnchor();this._zoomAnimated?$(this._container,t.add(n)):e=e.add(t).add(n);var o=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Le=Ft.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Ft.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Kt||this._source.on("preclick",$t))},onRemove:function(t){Ft.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Kt||this._source.off("preclick",$t))},getEvents:function(){var t=Ft.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=I("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=I("div",t+"-content-wrapper",e);if(this._contentNode=I("div",t+"-content",n),Ae(n),Li(this._contentNode),P(n,"contextmenu",$t),this._tipContainer=I("div",t+"-tip-container",e),this._tip=I("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=I("a",t+"-close-button",e);o.href="#close",o.innerHTML="&#215;",P(o,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=this.options.maxHeight,l="leaflet-popup-scrolled";r&&t.offsetHeight>r?(e.height=r+"px",O(t,l)):j(t,l),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();$(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(Ge(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,o=this._containerWidth,r=new M(this._containerLeft,-n-this._containerBottom);r._add(ee(this._container));var l=t.layerPointToContainerPoint(r),g=k(this.options.autoPanPadding),_=k(this.options.autoPanPaddingTopLeft||g),p=k(this.options.autoPanPaddingBottomRight||g),v=t.getSize(),y=0,w=0;l.x+o+p.x>v.x&&(y=l.x+o-v.x+p.x),l.x-y-_.x<0&&(y=l.x-_.x),l.y+n+p.y>v.y&&(w=l.y+n-v.y+p.y),l.y-w-_.y<0&&(w=l.y-_.y),(y||w)&&t.fire("autopanstart").panBy([y,w])}},_onCloseButtonClick:function(t){this._close(),Dt(t)},_getAnchor:function(){return k(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});T.mergeOptions({closePopupOnClick:!0}),T.include({openPopup:function(t,e,n){return t instanceof Le||(t=new Le(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return(!t||t===this._popup)&&(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Ct.include({bindPopup:function(t,e){return t instanceof Le?(S(t,e),this._popup=t,t._source=this):((!this._popup||e)&&(this._popup=new Le(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof Ct||(e=t,t=this),t instanceof oe)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map){if(Dt(t),e instanceof Kt)return void this.openPopup(t.layer||t.target,t.latlng);this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var we=Ft.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Ft.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Ft.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Ft.prototype.getEvents.call(this);return ht&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=I("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,o=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),l=this.options.direction,g=n.offsetWidth,_=n.offsetHeight,p=k(this.options.offset),v=this._getAnchor();"top"===l?t=t.add(k(-g/2+p.x,-_+p.y+v.y,!0)):"bottom"===l?t=t.subtract(k(g/2-p.x,-p.y,!0)):"center"===l?t=t.subtract(k(g/2+p.x,_/2-v.y+p.y,!0)):"right"===l||"auto"===l&&r.x<o.x?(l="right",t=t.add(k(p.x+v.x,v.y-_/2+p.y,!0))):(l="left",t=t.subtract(k(g+v.x-p.x,_/2-v.y-p.y,!0))),j(n,"leaflet-tooltip-right"),j(n,"leaflet-tooltip-left"),j(n,"leaflet-tooltip-top"),j(n,"leaflet-tooltip-bottom"),O(n,"leaflet-tooltip-"+l),$(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Mt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return k(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});T.include({openTooltip:function(t,e,n){return t instanceof we||(t=new we(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Ct.include({bindTooltip:function(t,e){return t instanceof we?(S(t,e),this._tooltip=t,t._source=this):((!this._tooltip||e)&&(this._tooltip=new we(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),ht&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof Ct||(e=t,t=this),t instanceof oe)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(O(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(j(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this.openTooltip(t.layer||t.target,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var n,o,e=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(e)}});var Ln=ye.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var o=k(n.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});ye.Default=Ue;var Ji=Ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){S(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),H(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(me(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=ke(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var l,e=this.getPane().children,n=-t(-1/0,1/0),o=0,r=e.length;o<r;o++)l=e[o].style.zIndex,e[o]!==this._container&&l&&(n=t(n,+l));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Et){Mt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var o in this._tiles){var r=this._tiles[o];if(r.current&&r.loaded){var l=Math.min(1,(t-r.loaded)/200);Mt(r.el,l),l<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(gt(this._fadeFrame),this._fadeFrame=it(this._updateOpacity,this))}},_onOpaqueTile:et,_initContainer:function(){this._container||(this._container=I("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(H(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var o=this._levels[t],r=this._map;return o||((o=this._levels[t]={}).el=I("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,r.getCenter(),r.getZoom()),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:et,_onRemoveLevel:et,_onCreateLevel:et,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)H(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,o){var r=Math.floor(t/2),l=Math.floor(e/2),g=n-1,_=new M(+r,+l);_.z=+g;var p=this._tileCoordsToKey(_),v=this._tiles[p];return v&&v.active?(v.retain=!0,!0):(v&&v.loaded&&(v.retain=!0),g>o&&this._retainParent(r,l,g,o))},_retainChildren:function(t,e,n,o){for(var r=2*t;r<2*t+2;r++)for(var l=2*e;l<2*e+2;l++){var g=new M(r,l);g.z=n+1;var _=this._tileCoordsToKey(g),p=this._tiles[_];p&&p.active?p.retain=!0:(p&&p.loaded&&(p.retain=!0),n+1<o&&this._retainChildren(r,l,n+1,o))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,o){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0),(!o||this.options.updateWhenZooming&&r!==this._tileZoom)&&(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var o=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,n)).round();st?te(t.el,r,o):$(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),o=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),l=e.getSize().divideBy(2*o);return new G(r.subtract(l),r.add(l))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var o=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(o),l=r.getCenter(),g=[],_=this.options.keepBuffer,p=new G(r.getBottomLeft().subtract([_,-_]),r.getTopRight().add([_,-_]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var v in this._tiles){var y=this._tiles[v].coords;(y.z!==this._tileZoom||!p.contains(new M(y.x,y.y)))&&(this._tiles[v].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var w=r.min.y;w<=r.max.y;w++)for(var tt=r.min.x;tt<=r.max.x;tt++){var Ht=new M(tt,w);Ht.z=this._tileZoom,this._isValidTile(Ht)&&(this._tiles[this._tileCoordsToKey(Ht)]||g.push(Ht))}if(g.sort(function(Qi,Jt){return Qi.distanceTo(l)-Jt.distanceTo(l)}),0!==g.length){this._loading||(this._loading=!0,this.fire("loading"));var ae=document.createDocumentFragment();for(tt=0;tt<g.length;tt++)this._addTile(g[tt],ae);this._level.el.appendChild(ae)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return J(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),o=t.scaleBy(n),r=o.add(n),_=new nt(e.unproject(o,t.z),e.unproject(r,t.z));return this.options.noWrap||e.wrapLatLngBounds(_),_},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new M(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(H(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){O(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=et,t.onmousemove=et,Et&&this.options.opacity<1&&Mt(t,this.options.opacity),he&&!Qt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),R(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&it(R(this._tileReady,this,t,null,r)),$(r,n),this._tiles[o]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,this._map._fadeAnimated?(Mt(n.el,0),gt(this._fadeFrame),this._fadeFrame=it(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(O(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Et||!this._map._fadeAnimated?it(this._pruneTiles,this):setTimeout(R(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?B(t.x,this._wrapX):t.x,this._wrapY?B(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new G(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var be=Ji.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=S(this,e)).detectRetina&&St&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),he||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return P(n,"load",R(this._tileOnLoad,this,e,n)),P(n,"error",R(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:St?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return Te(this._url,z(e,this.options))},_tileOnLoad:function(t,e){Et?setTimeout(R(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var o=this.options.errorTileUrl;o&&e.src!==o&&(e.src=o),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom;return this.options.zoomReverse&&(t=this.options.maxZoom-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=et,e.onerror=et,e.complete||(e.src=xe,H(e)))}});function wn(i,t){return new be(i,t)}var bn=be.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=z({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);e=S(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&St?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,be.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),o=this._crs.project(e.getSouthEast()),r=(this._wmsVersion>=1.3&&this._crs===vn?[o.y,n.x,n.y,o.x]:[n.x,o.y,o.x,n.y]).join(","),l=be.prototype.getTileUrl.call(this,t);return l+xt(this.wmsParams,l,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return z(this.wmsParams,t),e||this.redraw(),this}});be.WMS=bn,wn.wms=function yo(i,t){return new bn(i,t)};var Zt=Ct.extend({options:{padding:.1},initialize:function(t){S(this,t),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&O(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),o=ee(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,e),_=this._map.project(t,e).subtract(l),p=r.multiplyBy(-n).add(o).add(r).subtract(_);st?te(this._container,p,n):$(this._container,p)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new G(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Yi=Zt.extend({getEvents:function(){var t=Zt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");P(t,"mousemove",ke(this._onMouseMove,32,this),this),P(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),P(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,H(this._container),U(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},Zt.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),o=St?2:1;$(e,t.min),e.width=o*n.x,e.height=o*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",St&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Zt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[c(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,o=e.prev;n?n.prev=o:this._drawLast=o,o?o.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var o,e=t.options.dashArray.split(","),n=[];for(o=0;o<e.length;o++)n.push(Number(e[o]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||it(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,o,r,l,g=t._parts,_=g.length,p=this._ctx;if(_){for(this._drawnLayers[t._leaflet_id]=t,p.beginPath(),n=0;n<_;n++){for(o=0,r=g[n].length;o<r;o++)p[o?"lineTo":"moveTo"]((l=g[n][o]).x,l.y);e&&p.closePath()}this._fillStroke(p,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,o=t._radius,r=(t._radiusY||o)/o;this._drawnLayers[t._leaflet_id]=t,1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,o,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var n,o,e=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&!this._map._draggableMoved(n)&&(o=n);o&&(bi(t),this._fireEvent([o],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(j(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,o,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(o=n);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(O(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,o=e.prev;n&&(n.prev=o,o?o.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,o=e.prev;o&&(o.next=n,n?n.prev=o:o&&(this._drawLast=o),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function qi(i){return oi?new Yi(i):null}var Ke=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Mo={_initContainer:function(){this._container=I("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ke("shape");O(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ke("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;H(e),t.removeInteractiveTarget(e),delete this._layers[c(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,o=t.options,r=t._container;r.stroked=!!o.stroke,r.filled=!!o.fill,o.stroke?(e||(e=t._stroke=Ke("stroke")),r.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,e.dashStyle=o.dashArray?W(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):"",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(r.removeChild(e),t._stroke=null),o.fill?(n||(n=t._fill=Ke("fill")),r.appendChild(n),n.color=o.fillColor||o.color,n.opacity=o.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),o=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+o+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pe(t._container)},_bringToBack:function(t){me(t._container)}},pi=_e?Ke:_t,Pe=Zt.extend({getEvents:function(){var t=Zt.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=pi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){H(this._container),U(this._container),delete this._container,delete this._rootGroup},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Zt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),$(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=pi("path");t.options.className&&O(e,t.options.className),t.options.interactive&&O(e,"leaflet-interactive"),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){H(t._path),t.removeInteractiveTarget(t._path),delete this._layers[c(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Xt(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,r="a"+n+","+(t._radiusY||n)+" 0 1,0 ",l=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,l)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pe(t._path)},_bringToBack:function(t){me(t._path)}});function Xi(i){return Re||_e?new Pe(i):null}_e&&Pe.include(Mo),T.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&qi()||Xi()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=Pe&&Xi({pane:t})||Yi&&qi({pane:t}),this._paneRenderers[t]=e),e}});var Pn=Me.extend({initialize:function(t,e){Me.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=J(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Pe.create=pi,Pe.pointsToPath=Xt,Nt.geometryToLayer=Wi,Nt.coordsToLatLng=ji,Nt.coordsToLatLngs=fi,Nt.latLngToCoords=Ui,Nt.latLngsToCoords=gi,Nt.getFeature=Ce,Nt.asFeature=_i,T.mergeOptions({boxZoom:!0});var zn=At.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){P(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){U(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){H(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Ne(),Ei(),this._startPoint=this._map.mouseEventToContainerPoint(t),P(document,{contextmenu:Dt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=I("div","leaflet-zoom-box",this._container),O(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new G(this._point,this._startPoint),n=e.getSize();$(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(H(this._box),j(this._container,"leaflet-crosshair")),Fe(),Si(),U(document,{contextmenu:Dt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(R(this._resetState,this),0);var e=new nt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});T.addInitHook("addHandler","boxZoom",zn),T.mergeOptions({doubleClickZoom:!0});var kn=At.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),o=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-o:n+o;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});T.addInitHook("addHandler","doubleClickZoom",kn),T.mergeOptions({dragging:!0,inertia:!Qt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Tn=At.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ie(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}O(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){j(this._map._container,"leaflet-grab"),j(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=J(this._map.options.maxBounds);this._offsetLimit=It(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,r=(o-e+n)%t+e-n,l=(o+e+n)%t-e-n,g=Math.abs(r+n)<Math.abs(l+n)?r:l;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(t){var e=this._map,n=e.options,o=!n.inertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),g=n.easeLinearity,_=r.multiplyBy(g/((this._lastTime-this._times[0])/1e3)),p=_.distanceTo([0,0]),v=Math.min(n.inertiaMaxSpeed,p),y=_.multiplyBy(v/p),w=v/(n.inertiaDeceleration*g),tt=y.multiplyBy(-w/2).round();tt.x||tt.y?(tt=e._limitOffset(tt,e.options.maxBounds),it(function(){e.panBy(tt,{duration:w,easeLinearity:g,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});T.addInitHook("addHandler","dragging",Tn),T.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xn=At.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),P(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),U(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(o,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o,r,e=this._panKeys={},n=this.keyCodes;for(o=0,r=n.left.length;o<r;o++)e[n.left[o]]=[-1*t,0];for(o=0,r=n.right.length;o<r;o++)e[n.right[o]]=[t,0];for(o=0,r=n.down.length;o<r;o++)e[n.down[o]]=[0,t];for(o=0,r=n.up.length;o<r;o++)e[n.up[o]]=[0,-1*t]},_setZoomDelta:function(t){var o,r,e=this._zoomKeys={},n=this.keyCodes;for(o=0,r=n.zoomIn.length;o<r;o++)e[n.zoomIn[o]]=t;for(o=0,r=n.zoomOut.length;o<r;o++)e[n.zoomOut[o]]=-t},_addHooks:function(){P(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){U(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o,e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;o=this._panKeys[e],t.shiftKey&&(o=k(o).multiplyBy(3)),n.panBy(o),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else{if(27!==e||!n._popup)return;n.closePopup()}Dt(t)}}});T.addInitHook("addHandler","keyboard",xn),T.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var In=At.extend({addHooks:function(){P(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){U(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=on(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(R(this._performZoom,this),o),Dt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,l=n?Math.ceil(r/n)*n:r,g=t._limitZoom(e+(this._delta>0?l:-l))-e;this._delta=0,this._startTime=null,g&&("center"===t.options.scrollWheelZoom?t.setZoom(e+g):t.setZoomAround(this._lastMousePos,e+g))}});T.addInitHook("addHandler","scrollWheelZoom",In),T.mergeOptions({tap:!0,tapTolerance:15});var On=At.extend({addHooks:function(){P(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){U(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(yt(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new M(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&O(n,"leaflet-active"),this._holdTimeout=setTimeout(R(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),P(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),U(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&j(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});ht&&!ut&&T.addInitHook("addHandler","tap",On),T.mergeOptions({touchZoom:ht&&!Qt,bounceAtZoomLimits:!0});var En=At.extend({addHooks:function(){O(this._map._container,"leaflet-touch-zoom"),P(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){j(this._map._container,"leaflet-touch-zoom"),U(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(o)._divideBy(2))),this._startDist=n.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),P(document,"touchmove",this._onTouchMove,this),P(document,"touchend",this._onTouchEnd,this),yt(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var l=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===l.x&&0===l.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(l),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),gt(this._animRequest);var g=R(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=it(g,this,!0),yt(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,gt(this._animRequest),U(document,"touchmove",this._onTouchMove),U(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});T.addInitHook("addHandler","touchZoom",En),T.BoxZoom=zn,T.DoubleClickZoom=kn,T.Drag=Tn,T.Keyboard=xn,T.ScrollWheelZoom=In,T.Tap=On,T.TouchZoom=En;var Lo=window.L;window.L=m,Object.freeze=E,m.version="1.2.0",m.noConflict=function wo(){return window.L=Lo,this},m.Control=Tt,m.control=We,m.Browser=d,m.Evented=qt,m.Mixin=Kn,m.Util=vi,m.Class=wt,m.Handler=At,m.extend=z,m.bind=R,m.stamp=c,m.setOptions=S,m.DomEvent=Gn,m.DomUtil=Fn,m.PosAnimation=sn,m.Draggable=ie,m.LineUtil=Qn,m.PolyUtil=$n,m.Point=M,m.point=k,m.Bounds=G,m.bounds=It,m.Transformation=Ie,m.transformation=ue,m.Projection=to,m.LatLng=D,m.latLng=N,m.LatLngBounds=nt,m.latLngBounds=J,m.CRS=bt,m.GeoJSON=Nt,m.geoJSON=Mn,m.geoJson=co,m.Layer=Ct,m.LayerGroup=ve,m.layerGroup=function(t){return new ve(t)},m.FeatureGroup=oe,m.featureGroup=function(t){return new oe(t)},m.ImageOverlay=Ki,m.imageOverlay=function(t,e,n){return new Ki(t,e,n)},m.VideoOverlay=Cn,m.videoOverlay=function go(i,t,e){return new Cn(i,t,e)},m.DivOverlay=Ft,m.Popup=Le,m.popup=function(t,e){return new Le(t,e)},m.Tooltip=we,m.tooltip=function(t,e){return new we(t,e)},m.Icon=ye,m.icon=function ao(i){return new ye(i)},m.DivIcon=Ln,m.divIcon=function mo(i){return new Ln(i)},m.Marker=Ve,m.marker=function ro(i,t){return new Ve(i,t)},m.TileLayer=be,m.tileLayer=wn,m.GridLayer=Ji,m.gridLayer=function vo(i){return new Ji(i)},m.SVG=Pe,m.svg=Xi,m.Renderer=Zt,m.Canvas=Yi,m.canvas=qi,m.Path=Kt,m.CircleMarker=ci,m.circleMarker=function so(i,t){return new ci(i,t)},m.Circle=Hi,m.circle=function lo(i,t,e){return new Hi(i,t,e)},m.Polyline=Gt,m.polyline=function uo(i,t){return new Gt(i,t)},m.Polygon=Me,m.polygon=function ho(i,t){return new Me(i,t)},m.Rectangle=Pn,m.rectangle=function Co(i,t){return new Pn(i,t)},m.Map=T,m.map=function Hn(i,t){return new T(i,t)}}(Je)}}]);